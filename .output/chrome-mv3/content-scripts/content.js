var content=(function(){"use strict";var $e=Object.defineProperty;var Ke=(I,p,E)=>p in I?$e(I,p,{enumerable:!0,configurable:!0,writable:!0,value:E}):I[p]=E;var N=(I,p,E)=>Ke(I,typeof p!="symbol"?p+"":p,E);function I(t){return t}let p=null,E=null,M=null,q=null;function me(){if(!p)try{p=document.createElement("div"),p.id="reply-guy-overlay",E=p.attachShadow({mode:"open"});const t=document.createElement("style");t.textContent=de(),E.appendChild(t),M=document.createElement("div"),M.className="viewport-glow",M.id="rg-viewport-glow",E.appendChild(M),document.body.appendChild(p)}catch(t){console.warn("Failed to initialize glow:",t),ie()}}function Q(t){M&&(q&&(window.clearTimeout(q),q=null),M.className=`viewport-glow ${t}`,t==="complete"&&chrome.storage.local.get("reply-guy-storage",e=>{var s;const r=e["reply-guy-storage"];(((s=r==null?void 0:r.state)==null?void 0:s.persistentGlow)??!1)||(q=window.setTimeout(()=>{Q("idle")},1e4))}))}function ue(){ie()}function ie(){q&&(window.clearTimeout(q),q=null),p==null||p.remove(),p=null,E=null,M=null}function de(){return`
    .viewport-glow {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 2147483647;
      transition: box-shadow 0.3s ease;
      will-change: box-shadow;
    }

    .viewport-glow.idle {
      box-shadow: none;
    }

    .viewport-glow.analyzing {
      box-shadow: inset 0 0 60px 20px rgba(0, 112, 243, 0.4);
      animation: pulse-glow 2s ease-in-out infinite;
    }

    .viewport-glow.complete {
      box-shadow: inset 0 0 40px 10px rgba(0, 200, 83, 0.3);
      animation: none;
    }

    .viewport-glow.error {
      box-shadow: inset 0 0 60px 20px rgba(238, 0, 0, 0.4);
      animation: none;
    }

    .viewport-glow.low-confidence {
      box-shadow: inset 0 0 60px 20px rgba(255, 193, 7, 0.4);
      animation: none;
    }

    @keyframes pulse-glow {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.6;
      }
    }
  `}function y(t){var e;return((e=document.querySelector(`meta[name="${t}"]`)||document.querySelector(`meta[property="${t}"]`))==null?void 0:e.getAttribute("content"))||""}function Ae(){var A,w,f,_;try{const v=document.cloneNode(!0),{Readability:x}=require("@mozilla/readability"),b=new x(v).parse();if(b&&b.textContent)return{h1:b.title,bodyText:b.textContent.substring(0,3e3),excerpt:b.excerpt||"",byline:b.byline||"",method:"readability",confidence:fe(b)}}catch{}const t=((w=(A=document.querySelector("h1"))==null?void 0:A.textContent)==null?void 0:w.trim())||"",e=y("description"),r=y("og:title"),n=y("og:description"),s=y("og:image"),g=Array.from(document.querySelectorAll("a[href]")).map(v=>v.getAttribute("href")||"").filter(v=>/x\.com|twitter\.com|linkedin\.com|github\.com/.test(v)).slice(0,5),c=((_=(f=document.body)==null?void 0:f.innerText)==null?void 0:_.substring(0,3e3))||"",u=c.match(/[\w.-]+@[\w.-]+\.\w+/);return{h1:t||r||"",bodyText:c,metaDescription:e,ogDescription:n,ogImage:s,socialLinks:g,email:(u==null?void 0:u[0])||"",method:"meta-tags",confidence:he(t,e,c)}}function fe(t){if(!t)return 30;let e=50;return t.textContent&&t.textContent.length>500&&(e+=10),t.textContent&&t.textContent.length>1500&&(e+=10),t.title&&(e+=10),t.excerpt&&(e+=10),t.byline&&(e+=10),Math.min(e,100)}function he(t,e,r){let n=30;return t&&(n+=15),e&&(n+=15),r&&r.length>500&&(n+=20),r&&r.length>1500&&(n+=20),Math.min(n,100)}const pe={matches:["<all_urls>"],runAt:"document_idle",main(){B().then(()=>{j()}),chrome.runtime.onMessage.addListener(r=>(r.type==="SCRAPE_PAGE"&&B().then(()=>{j()}),r.type==="START_ANALYSIS"&&(me(),Q("analyzing"),B().then(()=>{j()})),r.type==="ANALYSIS_COMPLETE"&&Q(r.confidence<50?"low-confidence":"complete"),r.type==="CLOSE_PANEL"&&ue(),!0));let t=location.href,e=null;new MutationObserver(()=>{location.href!==t&&(t=location.href,e&&clearTimeout(e),e=setTimeout(()=>{e=null,B().then(()=>{j()})},500))}).observe(document.body,{childList:!0,subtree:!0})}};function B(){return new Promise(t=>{if(document.readyState==="complete")oe(t);else{const e=()=>{oe(t),document.removeEventListener("DOMContentLoaded",e)};document.addEventListener("DOMContentLoaded",e)}})}function oe(t){const e=le(location.hostname),r=xe(e);if(ae(r)){t();return}let n=!1;const s=new MutationObserver(()=>{!n&&ae(r)&&(n=!0,s.disconnect(),t())});s.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{n||(n=!0,s.disconnect(),t())},5e3)}function xe(t){switch(t){case"x":return['[data-testid="UserName"]','[data-testid="tweet"]'];case"linkedin":return[".text-heading-xlarge",".pv-top-card",".scaffold-layout"];case"github":return[".p-name",'[itemprop="worksFor"]'];default:return["h1","main","article"]}}function ae(t){return t.some(e=>document.querySelector(e)!==null)}function j(){const t=be();chrome.runtime.sendMessage({type:"PAGE_DATA",data:t}).catch(()=>{})}function be(){const t=location.href,e=location.hostname,r=le(e),n={url:t,hostname:e,platform:r,title:document.title,metaDescription:y("description"),ogTitle:y("og:title"),ogDescription:y("og:description"),ogImage:y("og:image"),scrapedAt:new Date().toISOString(),isReady:!0};if(r==="x")return{...n,...ye()};if(r==="linkedin")return{...n,...ve()};if(r==="github")return{...n,..._e()};const s=Ae();return{...n,...s}}function le(t){return t.includes("x.com")||t.includes("twitter.com")?"x":t.includes("linkedin.com")?"linkedin":t.includes("github.com")?"github":"generic"}function ye(){var t,e,r,n;try{const s=((t=document.querySelector('[data-testid="UserName"] span'))==null?void 0:t.textContent)||"",g=((e=document.querySelector('[data-testid="UserDescription"]'))==null?void 0:e.textContent)||"",c=((r=document.querySelector('[data-testid="UserLocation"]'))==null?void 0:r.textContent)||"",u=((n=document.querySelector('[href$="/followers"] span'))==null?void 0:n.textContent)||"",A=Array.from(document.querySelectorAll('[data-testid="tweetText"]')).slice(0,6).map(b=>b.textContent||""),w=window.location.pathname.match(/^\/([^/]+)/),f=(w==null?void 0:w[1])||"",_=we(),v=_.length>0;let x=50;return s&&(x+=15),g&&(x+=10),c&&(x+=5),u&&(x+=5),A.length>0&&(x+=15),{name:s,bio:g,location:c,followers:u,recentPosts:A,username:f,isProfile:!0,confidence:Math.min(x,100),threadContext:_,isThread:v}}catch{return{}}}function we(){try{if(!/\/status\/\d+/.test(window.location.pathname))return[];const e=Array.from(document.querySelectorAll('[data-testid="tweetText"]'));return e.length<=1?[]:e.slice(0,5).map(r=>{var n;return((n=r.textContent)==null?void 0:n.trim())||""}).filter(r=>r.length>0)}catch{return[]}}function ce(t){for(const e of t)try{const r=document.querySelector(e);if(r)return r}catch{}return null}function P(t){var e,r;return((r=(e=ce(t))==null?void 0:e.textContent)==null?void 0:r.trim())||""}function F(t,e=2e3){var r;try{const n=document.getElementById(t);if(n){const c=n.closest("section");if(c)return G(c.innerText,e);const u=n.parentElement;if(u){const A=u.nextElementSibling;if(A)return G(A.innerText,e)}}const s=t.charAt(0).toUpperCase()+t.slice(1),g=document.querySelectorAll("section");for(const c of g){const u=c.querySelector('h2, [class*="header"]');if(u&&((r=u.textContent)!=null&&r.trim().toLowerCase().includes(t.toLowerCase())))return G(c.innerText,e)}return""}catch{return""}}function G(t,e){return t.replace(/\s*see more\s*/gi," ").replace(/\s*\.\.\.(see more|show more)\s*/gi," ").replace(/\n{3,}/g,`

`).replace(/[ \t]+/g," ").trim().substring(0,e)}function ee(t,e=8){try{const r=document.getElementById(t);if(!r)return[];const n=r.closest("section");if(!n)return[];const s=n.querySelectorAll('li.artdeco-list__item, li[class*="pvs-list__item"], li[class*="pvs-list__paged-list-item"]');return s.length>0?Array.from(s).slice(0,e).map(c=>{var A;return((A=c.innerText)==null?void 0:A.replace(/\n+/g," | ").replace(/\s+/g," ").trim())||""}).filter(c=>c.length>5):G(n.innerText,3e3).split(/\n{2,}/).map(c=>c.trim()).filter(c=>c.length>10).slice(0,e)}catch{return[]}}function ve(){var t,e,r,n,s,g,c;try{const u=window.location.href,A=/linkedin\.com\/in\//.test(u);if(/linkedin\.com\/company\//.test(u))return Ce();if(!A)return{name:y("og:title")||((e=(t=document.querySelector("h1"))==null?void 0:t.textContent)==null?void 0:e.trim())||"",bodyText:((s=(n=(r=document.querySelector(".article-content, .reader-article-content"))==null?void 0:r.textContent)==null?void 0:n.trim())==null?void 0:s.substring(0,3e3))||"",confidence:40};const f=P([".text-heading-xlarge","h1.top-card-layout__title",'[data-anonymize="person-name"]',".pv-top-card--list li:first-child","h1"])||[y("profile:first_name"),y("profile:last_name")].filter(Boolean).join(" "),_=P([".text-body-medium.break-words",".top-card-layout__headline",'[data-anonymize="headline"]',".pv-top-card--list + .text-body-medium"]),v=P([".text-body-small.inline.t-black--light.break-words",".top-card-layout__first-subline",".pv-top-card--list-bullet li:first-child",'span.text-body-small[class*="break-words"]']),x=P([".dist-value",".distance-badge .dist-value",'span[class*="distance-badge"]']),b=P([".pvs-header__optional-link span.t-bold",".t-bold:has(+ .t-black--light)",'[data-anonymize="connections-count"]','span[class*="t-bold"][class*="connections"]'])||Se(),K=(()=>{const l=ce([".pv-top-card-profile-picture__image",".pv-top-card__photo img","img.profile-photo-edit__preview",".presence-entity__image",'img[class*="pv-top-card"]']);return(l==null?void 0:l.src)||y("og:image")||""})(),O=F("about",2e3)||P(["#about ~ .display-flex .inline-show-more-text",".pv-about-section .pv-about__summary-text",'[data-anonymize="about-description"]']),D=ee("experience",8),Z=ee("education",5),J=ee("skills",15),X=Array.from(document.querySelectorAll('#skills ~ div span[aria-hidden="true"], [id="skills"] ~ div span[aria-hidden="true"], .pv-skill-category-entity__name-text')).slice(0,15).map(l=>{var d;return((d=l.textContent)==null?void 0:d.trim())||""}).filter(l=>l.length>1&&l.length<60),L=X.length>0?X:J,i=Te(),o={};for(const l of["about","experience","education","skills","certifications","publications","projects","volunteering"]){const d=F(l,1500);d.length>20&&(o[l]=d)}let a=30;return f&&f.length>2&&(a+=15),_&&(a+=10),O&&O.length>50&&(a+=15),D.length>0&&(a+=10),Z.length>0&&(a+=5),L.length>0&&(a+=5),i.length>0&&(a+=5),v&&(a+=3),x&&(a+=2),{name:f,headline:_,about:O,location:v,followers:b,connectionDegree:x,avatarUrl:K,experience:D,education:Z,skills:L,recentActivity:i,profileSections:o,isProfile:!0,confidence:Math.min(a,100)}}catch{return{name:y("og:title")||((c=(g=document.querySelector("h1"))==null?void 0:g.textContent)==null?void 0:c.trim())||"",headline:y("og:description")||"",isProfile:!0,confidence:25}}}function Se(){try{const t=document.querySelector(".pv-top-card, .scaffold-layout__main");if(!t)return"";const r=(t.textContent||"").match(/(\d[\d,]+)\+?\s*(followers|connections)/i);return r?r[1]+" "+r[2]:""}catch{return""}}function Te(){try{const t=document.querySelectorAll('.feed-shared-update-v2__description, .pv-recent-activity-section__card-subtitle, [class*="feed-shared-text"] span[dir="ltr"], .update-components-text span[dir="ltr"]');if(t.length>0)return Array.from(t).slice(0,6).map(r=>{var n,s;return((s=(n=r.textContent)==null?void 0:n.trim())==null?void 0:s.substring(0,400))||""}).filter(r=>r.length>10);const e=F("recent-activity",2e3)||F("activity",2e3);return e.length>30?e.split(/\n{2,}/).map(r=>r.trim()).filter(r=>r.length>20).slice(0,6):[]}catch{return[]}}function Ce(){var t,e,r,n,s,g;try{const c=((e=(t=document.querySelector("h1 span"))==null?void 0:t.textContent)==null?void 0:e.trim())||y("og:title")||"",u=P([".org-top-card-summary__tagline",".top-card-layout__headline"]),A=((r=P([".org-about-us-organization-description__text",".org-page-details__definition-text"]))==null?void 0:r.substring(0,2e3))||F("about",2e3),w=((g=(s=(n=document.querySelector(".org-grid__content-height-enforcer, main"))==null?void 0:n.textContent)==null?void 0:s.trim())==null?void 0:g.substring(0,3e3))||"";return{name:c,headline:u,about:A,bodyText:w,isProfile:!1,confidence:c?60:35}}catch{return{isProfile:!1,confidence:25}}}function _e(){var t,e,r,n,s,g;try{const c=((e=(t=document.querySelector(".p-name"))==null?void 0:t.textContent)==null?void 0:e.trim())||"",u=((n=(r=document.querySelector(".p-note .js-user-profile-bio"))==null?void 0:r.textContent)==null?void 0:n.trim())||"",A=((g=(s=document.querySelector('[itemprop="worksFor"]'))==null?void 0:s.textContent)==null?void 0:g.trim())||"",w=!!document.querySelector(".p-name");let f=40;return c&&(f+=20),u&&(f+=15),A&&(f+=10),w&&(f+=15),{name:c,bio:u,company:A,isProfile:w,confidence:Math.min(f,100)}}catch{return{}}}function ke(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var z={exports:{}},Ee=z.exports,ge;function Pe(){return ge||(ge=1,(function(t,e){(function(r,n){n(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Ee,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const n="The message port closed before a response was received.",s=g=>{const c={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(c).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class u extends WeakMap{constructor(o,a=void 0){super(a),this.createItem=o}get(o){return this.has(o)||this.set(o,this.createItem(o)),super.get(o)}}const A=i=>i&&typeof i=="object"&&typeof i.then=="function",w=(i,o)=>(...a)=>{g.runtime.lastError?i.reject(new Error(g.runtime.lastError.message)):o.singleCallbackArg||a.length<=1&&o.singleCallbackArg!==!1?i.resolve(a[0]):i.resolve(a)},f=i=>i==1?"argument":"arguments",_=(i,o)=>function(l,...d){if(d.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${f(o.minArgs)} for ${i}(), got ${d.length}`);if(d.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${f(o.maxArgs)} for ${i}(), got ${d.length}`);return new Promise((S,T)=>{if(o.fallbackToNoCallback)try{l[i](...d,w({resolve:S,reject:T},o))}catch(m){console.warn(`${i} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),l[i](...d),o.fallbackToNoCallback=!1,o.noCallback=!0,S()}else o.noCallback?(l[i](...d),S()):l[i](...d,w({resolve:S,reject:T},o))})},v=(i,o,a)=>new Proxy(o,{apply(l,d,S){return a.call(d,i,...S)}});let x=Function.call.bind(Object.prototype.hasOwnProperty);const b=(i,o={},a={})=>{let l=Object.create(null),d={has(T,m){return m in i||m in l},get(T,m,C){if(m in l)return l[m];if(!(m in i))return;let h=i[m];if(typeof h=="function")if(typeof o[m]=="function")h=v(i,i[m],o[m]);else if(x(a,m)){let R=_(m,a[m]);h=v(i,i[m],R)}else h=h.bind(i);else if(typeof h=="object"&&h!==null&&(x(o,m)||x(a,m)))h=b(h,o[m],a[m]);else if(x(a,"*"))h=b(h,o[m],a["*"]);else return Object.defineProperty(l,m,{configurable:!0,enumerable:!0,get(){return i[m]},set(R){i[m]=R}}),h;return l[m]=h,h},set(T,m,C,h){return m in l?l[m]=C:i[m]=C,!0},defineProperty(T,m,C){return Reflect.defineProperty(l,m,C)},deleteProperty(T,m){return Reflect.deleteProperty(l,m)}},S=Object.create(i);return new Proxy(S,d)},K=i=>({addListener(o,a,...l){o.addListener(i.get(a),...l)},hasListener(o,a){return o.hasListener(i.get(a))},removeListener(o,a){o.removeListener(i.get(a))}}),O=new u(i=>typeof i!="function"?i:function(a){const l=b(a,{},{getContent:{minArgs:0,maxArgs:0}});i(l)}),D=new u(i=>typeof i!="function"?i:function(a,l,d){let S=!1,T,m=new Promise(U=>{T=function(k){S=!0,U(k)}}),C;try{C=i(a,l,T)}catch(U){C=Promise.reject(U)}const h=C!==!0&&A(C);if(C!==!0&&!h&&!S)return!1;const R=U=>{U.then(k=>{d(k)},k=>{let se;k&&(k instanceof Error||typeof k.message=="string")?se=k.message:se="An unexpected error occurred",d({__mozWebExtensionPolyfillReject__:!0,message:se})}).catch(k=>{console.error("Failed to send onMessage rejected reply",k)})};return R(h?C:m),!0}),Z=({reject:i,resolve:o},a)=>{g.runtime.lastError?g.runtime.lastError.message===n?o():i(new Error(g.runtime.lastError.message)):a&&a.__mozWebExtensionPolyfillReject__?i(new Error(a.message)):o(a)},J=(i,o,a,...l)=>{if(l.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${f(o.minArgs)} for ${i}(), got ${l.length}`);if(l.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${f(o.maxArgs)} for ${i}(), got ${l.length}`);return new Promise((d,S)=>{const T=Z.bind(null,{resolve:d,reject:S});l.push(T),a.sendMessage(...l)})},X={devtools:{network:{onRequestFinished:K(O)}},runtime:{onMessage:K(D),onMessageExternal:K(D),sendMessage:J.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:J.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},L={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return c.privacy={network:{"*":L},services:{"*":L},websites:{"*":L}},b(g,X,c)};r.exports=s(chrome)}})})(z)),z.exports}var Me=Pe();const W=ke(Me);function H(t,...e){}const qe={debug:(...t)=>H(console.debug,...t),log:(...t)=>H(console.log,...t),warn:(...t)=>H(console.warn,...t),error:(...t)=>H(console.error,...t)},Y=class Y extends Event{constructor(e,r){super(Y.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=r}};N(Y,"EVENT_NAME",re("wxt:locationchange"));let te=Y;function re(t){var e;return`${(e=W==null?void 0:W.runtime)==null?void 0:e.id}:content:${t}`}function Ne(t){let e,r;return{run(){e==null&&(r=new URL(location.href),e=t.setInterval(()=>{let n=new URL(location.href);n.href!==r.href&&(window.dispatchEvent(new te(n,r)),r=n)},1e3))}}}const $=class ${constructor(e,r){N(this,"isTopFrame",window.self===window.top);N(this,"abortController");N(this,"locationWatcher",Ne(this));N(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return W.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,r){const n=setInterval(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearInterval(n)),n}setTimeout(e,r){const n=setTimeout(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearTimeout(n)),n}requestAnimationFrame(e){const r=requestAnimationFrame((...n)=>{this.isValid&&e(...n)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(e,r){const n=requestIdleCallback((...s)=>{this.signal.aborted||e(...s)},r);return this.onInvalidated(()=>cancelIdleCallback(n)),n}addEventListener(e,r,n,s){var g;r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(g=e.addEventListener)==null||g.call(e,r.startsWith("wxt:")?re(r):r,n,{...s,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),qe.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:$.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var g,c,u;const r=((g=e.data)==null?void 0:g.type)===$.SCRIPT_STARTED_MESSAGE_TYPE,n=((c=e.data)==null?void 0:c.contentScriptName)===this.contentScriptName,s=!this.receivedMessageIds.has((u=e.data)==null?void 0:u.messageId);return r&&n&&s}listenForNewerScripts(e){let r=!0;const n=s=>{if(this.verifyScriptStartedEvent(s)){this.receivedMessageIds.add(s.data.messageId);const g=r;if(r=!1,g&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",n),this.onInvalidated(()=>removeEventListener("message",n))}};N($,"SCRIPT_STARTED_MESSAGE_TYPE",re("wxt:content-script-started"));let ne=$;const Ie=Symbol("null");let Le=0;class Re extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[r,n]of e)this.set(r,n)}}_getPublicKeys(e,r=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const n=this._getPrivateKey(e,r);let s;return n&&this._publicKeys.has(n)?s=this._publicKeys.get(n):r&&(s=[...e],this._publicKeys.set(n,s)),{privateKey:n,publicKey:s}}_getPrivateKey(e,r=!1){const n=[];for(let s of e){s===null&&(s=Ie);const g=typeof s=="object"||typeof s=="function"?"_objectHashes":typeof s=="symbol"?"_symbolHashes":!1;if(!g)n.push(s);else if(this[g].has(s))n.push(this[g].get(s));else if(r){const c=`@@mkm-ref-${Le++}@@`;this[g].set(s,c),n.push(c)}else return!1}return JSON.stringify(n)}set(e,r){const{publicKey:n}=this._getPublicKeys(e,!0);return super.set(n,r)}get(e){const{publicKey:r}=this._getPublicKeys(e);return super.get(r)}has(e){const{publicKey:r}=this._getPublicKeys(e);return super.has(r)}delete(e){const{publicKey:r,privateKey:n}=this._getPublicKeys(e);return!!(r&&super.delete(r)&&this._publicKeys.delete(n))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new Re;function De(){}function V(t,...e){}const Fe={debug:(...t)=>V(console.debug,...t),log:(...t)=>V(console.log,...t),warn:(...t)=>V(console.warn,...t),error:(...t)=>V(console.error,...t)};return(async()=>{try{const{main:t,...e}=pe,r=new ne("content",e);return await t(r)}catch(t){throw Fe.error('The content script "content" crashed on startup!',t),t}})()})();
content;
