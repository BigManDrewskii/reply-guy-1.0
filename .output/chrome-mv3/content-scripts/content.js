var content=(function(){"use strict";var Me=Object.defineProperty;var _e=(I,f,P)=>f in I?Me(I,f,{enumerable:!0,configurable:!0,writable:!0,value:P}):I[f]=P;var q=(I,f,P)=>_e(I,typeof f!="symbol"?f+"":f,P);function I(t){return t}let f=null,P=null,_=null,N=null;function oe(){if(!f)try{f=document.createElement("div"),f.id="reply-guy-overlay",P=f.attachShadow({mode:"open"});const t=document.createElement("style");t.textContent=le(),P.appendChild(t),_=document.createElement("div"),_.className="viewport-glow",_.id="rg-viewport-glow",P.appendChild(_),document.body.appendChild(f)}catch(t){console.warn("Failed to initialize glow:",t),te()}}function V(t){_&&(N&&(window.clearTimeout(N),N=null),_.className=`viewport-glow ${t}`,t==="complete"&&chrome.storage.local.get("reply-guy-storage",e=>{var o;const r=e["reply-guy-storage"];(((o=r==null?void 0:r.state)==null?void 0:o.persistentGlow)??!1)||(N=window.setTimeout(()=>{V("idle")},1e4))}))}function ae(){te()}function te(){N&&(window.clearTimeout(N),N=null),f==null||f.remove(),f=null,P=null,_=null}function le(){return`
    .viewport-glow {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 2147483647;
      transition: box-shadow 0.3s ease;
      will-change: box-shadow;
    }

    .viewport-glow.idle {
      box-shadow: none;
    }

    .viewport-glow.analyzing {
      box-shadow: inset 0 0 60px 20px rgba(0, 112, 243, 0.4);
      animation: pulse-glow 2s ease-in-out infinite;
    }

    .viewport-glow.complete {
      box-shadow: inset 0 0 40px 10px rgba(0, 200, 83, 0.3);
      animation: none;
    }

    .viewport-glow.error {
      box-shadow: inset 0 0 60px 20px rgba(238, 0, 0, 0.4);
      animation: none;
    }

    .viewport-glow.low-confidence {
      box-shadow: inset 0 0 60px 20px rgba(255, 193, 7, 0.4);
      animation: none;
    }

    @keyframes pulse-glow {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.6;
      }
    }
  `}function M(t){var e;return((e=document.querySelector(`meta[name="${t}"]`)||document.querySelector(`meta[property="${t}"]`))==null?void 0:e.getAttribute("content"))||""}function ce(){var w,b,A,E;try{const y=document.cloneNode(!0),{Readability:p}=require("@mozilla/readability"),h=new p(y).parse();if(h&&h.textContent)return{h1:h.title,bodyText:h.textContent.substring(0,2e3),excerpt:h.excerpt||"",byline:h.byline||"",method:"readability",confidence:ge(h)}}catch{}const t=((b=(w=document.querySelector("h1"))==null?void 0:w.textContent)==null?void 0:b.trim())||"",e=M("description"),r=M("og:title"),n=M("og:description"),o=M("og:image"),c=Array.from(document.querySelectorAll("a[href]")).map(y=>y.getAttribute("href")||"").filter(y=>/x\.com|twitter\.com|linkedin\.com|github\.com/.test(y)).slice(0,5),m=((E=(A=document.body)==null?void 0:A.innerText)==null?void 0:E.substring(0,2e3))||"",u=m.match(/[\w.-]+@[\w.-]+\.\w+/);return{h1:t||r||"",bodyText:m,metaDescription:e,ogDescription:n,ogImage:o,socialLinks:c,email:(u==null?void 0:u[0])||"",method:"meta-tags",confidence:me(t,e,m)}}function ge(t){if(!t)return 30;let e=50;return t.textContent&&t.textContent.length>500&&(e+=10),t.textContent&&t.textContent.length>1500&&(e+=10),t.title&&(e+=10),t.excerpt&&(e+=10),t.byline&&(e+=10),Math.min(e,100)}function me(t,e,r){let n=30;return t&&(n+=15),e&&(n+=15),r&&r.length>500&&(n+=20),r&&r.length>1500&&(n+=20),Math.min(n,100)}const ue={matches:["<all_urls>"],runAt:"document_idle",main(){O().then(()=>{D()}),chrome.runtime.onMessage.addListener(r=>(r.type==="SCRAPE_PAGE"&&O().then(()=>{D()}),r.type==="START_ANALYSIS"&&(oe(),V("analyzing"),O().then(()=>{D()})),r.type==="ANALYSIS_COMPLETE"&&V(r.confidence<50?"low-confidence":"complete"),r.type==="CLOSE_PANEL"&&ae(),!0));let t=location.href,e=null;new MutationObserver(()=>{location.href!==t&&(t=location.href,e&&clearTimeout(e),e=setTimeout(()=>{e=null,O().then(()=>{D()})},500))}).observe(document.body,{childList:!0,subtree:!0})}};function O(){return new Promise(t=>{if(document.readyState==="complete")re(t);else{const e=()=>{re(t),document.removeEventListener("DOMContentLoaded",e)};document.addEventListener("DOMContentLoaded",e)}})}function re(t){const e=se(location.hostname),r=Ae(e);if(ne(r)){t();return}let n=!1;const o=new MutationObserver(()=>{!n&&ne(r)&&(n=!0,o.disconnect(),t())});o.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{n||(n=!0,o.disconnect(),t())},5e3)}function Ae(t){switch(t){case"x":return['[data-testid="UserName"]','[data-testid="tweet"]'];case"linkedin":return[".text-heading-xlarge",".pv-top-card",".scaffold-layout"];case"github":return[".p-name",'[itemprop="worksFor"]'];default:return["h1","main","article"]}}function ne(t){return t.some(e=>document.querySelector(e)!==null)}function D(){const t=de();chrome.runtime.sendMessage({type:"PAGE_DATA",data:t}).catch(()=>{})}function de(){const t=location.href,e=location.hostname,r=se(e),n={url:t,hostname:e,platform:r,title:document.title,metaDescription:M("description"),ogTitle:M("og:title"),ogDescription:M("og:description"),ogImage:M("og:image"),scrapedAt:new Date().toISOString(),isReady:!0};if(r==="x")return{...n,...fe()};if(r==="linkedin")return{...n,...xe()};if(r==="github")return{...n,...pe()};const o=ce();return{...n,...o}}function se(t){return t.includes("x.com")||t.includes("twitter.com")?"x":t.includes("linkedin.com")?"linkedin":t.includes("github.com")?"github":"generic"}function fe(){var t,e,r,n;try{const o=((t=document.querySelector('[data-testid="UserName"] span'))==null?void 0:t.textContent)||"",c=((e=document.querySelector('[data-testid="UserDescription"]'))==null?void 0:e.textContent)||"",m=((r=document.querySelector('[data-testid="UserLocation"]'))==null?void 0:r.textContent)||"",u=((n=document.querySelector('[href$="/followers"] span'))==null?void 0:n.textContent)||"",w=Array.from(document.querySelectorAll('[data-testid="tweetText"]')).slice(0,6).map(h=>h.textContent||""),b=window.location.pathname.match(/^\/([^/]+)/),A=(b==null?void 0:b[1])||"",E=he(),y=E.length>0;let p=50;return o&&(p+=15),c&&(p+=10),m&&(p+=5),u&&(p+=5),w.length>0&&(p+=15),{name:o,bio:c,location:m,followers:u,recentPosts:w,username:A,isProfile:!0,confidence:Math.min(p,100),threadContext:E,isThread:y}}catch{return{}}}function he(){try{if(!/\/status\/\d+/.test(window.location.pathname))return[];const e=Array.from(document.querySelectorAll('[data-testid="tweetText"]'));return e.length<=1?[]:e.slice(0,5).map(r=>{var n;return((n=r.textContent)==null?void 0:n.trim())||""}).filter(r=>r.length>0)}catch{return[]}}function xe(){var t,e,r,n,o,c,m,u,w,b,A;try{const E=((e=(t=document.querySelector(".text-heading-xlarge"))==null?void 0:t.textContent)==null?void 0:e.trim())||"",y=((n=(r=document.querySelector(".text-body-medium.break-words"))==null?void 0:r.textContent)==null?void 0:n.trim())||"",p=((c=(o=document.querySelector("#about ~ div .visually-hidden + span"))==null?void 0:o.textContent)==null?void 0:c.trim())||"",h=!!document.querySelector(".text-heading-xlarge"),L=Array.from(document.querySelectorAll("#experience ~ div .pvs-entity__path-node + div")).slice(0,5).map(s=>{var i;return((i=s.textContent)==null?void 0:i.trim())||""}).filter(Boolean),z=Array.from(document.querySelectorAll('#skills ~ div .pvs-entity__path-node + div span[aria-hidden="true"]')).slice(0,10).map(s=>{var i;return((i=s.textContent)==null?void 0:i.trim())||""}).filter(Boolean),H=((u=(m=document.querySelector(".dist-value"))==null?void 0:m.textContent)==null?void 0:u.trim())||"",X=((b=(w=document.querySelector(".text-body-small.inline.t-black--light.break-words"))==null?void 0:w.textContent)==null?void 0:b.trim())||"",R=document.querySelector(".pvs-header__optional-link span.t-bold"),Q=((A=R==null?void 0:R.textContent)==null?void 0:A.trim())||"";let T=40;return E&&(T+=20),y&&(T+=15),p&&(T+=15),h&&(T+=10),L.length>0&&(T+=5),z.length>0&&(T+=5),{name:E,headline:y,about:p,isProfile:h,location:X,followers:Q,experience:L,skills:z,connectionDegree:H,confidence:Math.min(T,100)}}catch{return{}}}function pe(){var t,e,r,n,o,c;try{const m=((e=(t=document.querySelector(".p-name"))==null?void 0:t.textContent)==null?void 0:e.trim())||"",u=((n=(r=document.querySelector(".p-note .js-user-profile-bio"))==null?void 0:r.textContent)==null?void 0:n.trim())||"",w=((c=(o=document.querySelector('[itemprop="worksFor"]'))==null?void 0:o.textContent)==null?void 0:c.trim())||"",b=!!document.querySelector(".p-name");let A=40;return m&&(A+=20),u&&(A+=15),w&&(A+=10),b&&(A+=15),{name:m,bio:u,company:w,isProfile:b,confidence:Math.min(A,100)}}catch{return{}}}function be(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var B={exports:{}},ye=B.exports,ie;function we(){return ie||(ie=1,(function(t,e){(function(r,n){n(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ye,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const n="The message port closed before a response was received.",o=c=>{const m={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(m).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class u extends WeakMap{constructor(i,l=void 0){super(l),this.createItem=i}get(i){return this.has(i)||this.set(i,this.createItem(i)),super.get(i)}}const w=s=>s&&typeof s=="object"&&typeof s.then=="function",b=(s,i)=>(...l)=>{c.runtime.lastError?s.reject(new Error(c.runtime.lastError.message)):i.singleCallbackArg||l.length<=1&&i.singleCallbackArg!==!1?s.resolve(l[0]):s.resolve(l)},A=s=>s==1?"argument":"arguments",E=(s,i)=>function(g,...x){if(x.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${A(i.minArgs)} for ${s}(), got ${x.length}`);if(x.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${A(i.maxArgs)} for ${s}(), got ${x.length}`);return new Promise((v,S)=>{if(i.fallbackToNoCallback)try{g[s](...x,b({resolve:v,reject:S},i))}catch(a){console.warn(`${s} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),g[s](...x),i.fallbackToNoCallback=!1,i.noCallback=!0,v()}else i.noCallback?(g[s](...x),v()):g[s](...x,b({resolve:v,reject:S},i))})},y=(s,i,l)=>new Proxy(i,{apply(g,x,v){return l.call(x,s,...v)}});let p=Function.call.bind(Object.prototype.hasOwnProperty);const h=(s,i={},l={})=>{let g=Object.create(null),x={has(S,a){return a in s||a in g},get(S,a,C){if(a in g)return g[a];if(!(a in s))return;let d=s[a];if(typeof d=="function")if(typeof i[a]=="function")d=y(s,s[a],i[a]);else if(p(l,a)){let F=E(a,l[a]);d=y(s,s[a],F)}else d=d.bind(s);else if(typeof d=="object"&&d!==null&&(p(i,a)||p(l,a)))d=h(d,i[a],l[a]);else if(p(l,"*"))d=h(d,i[a],l["*"]);else return Object.defineProperty(g,a,{configurable:!0,enumerable:!0,get(){return s[a]},set(F){s[a]=F}}),d;return g[a]=d,d},set(S,a,C,d){return a in g?g[a]=C:s[a]=C,!0},defineProperty(S,a,C){return Reflect.defineProperty(g,a,C)},deleteProperty(S,a){return Reflect.deleteProperty(g,a)}},v=Object.create(s);return new Proxy(v,x)},L=s=>({addListener(i,l,...g){i.addListener(s.get(l),...g)},hasListener(i,l){return i.hasListener(s.get(l))},removeListener(i,l){i.removeListener(s.get(l))}}),z=new u(s=>typeof s!="function"?s:function(l){const g=h(l,{},{getContent:{minArgs:0,maxArgs:0}});s(g)}),H=new u(s=>typeof s!="function"?s:function(l,g,x){let v=!1,S,a=new Promise(K=>{S=function(k){v=!0,K(k)}}),C;try{C=s(l,g,S)}catch(K){C=Promise.reject(K)}const d=C!==!0&&w(C);if(C!==!0&&!d&&!v)return!1;const F=K=>{K.then(k=>{x(k)},k=>{let ee;k&&(k instanceof Error||typeof k.message=="string")?ee=k.message:ee="An unexpected error occurred",x({__mozWebExtensionPolyfillReject__:!0,message:ee})}).catch(k=>{console.error("Failed to send onMessage rejected reply",k)})};return F(d?C:a),!0}),X=({reject:s,resolve:i},l)=>{c.runtime.lastError?c.runtime.lastError.message===n?i():s(new Error(c.runtime.lastError.message)):l&&l.__mozWebExtensionPolyfillReject__?s(new Error(l.message)):i(l)},R=(s,i,l,...g)=>{if(g.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${A(i.minArgs)} for ${s}(), got ${g.length}`);if(g.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${A(i.maxArgs)} for ${s}(), got ${g.length}`);return new Promise((x,v)=>{const S=X.bind(null,{resolve:x,reject:v});g.push(S),l.sendMessage(...g)})},Q={devtools:{network:{onRequestFinished:L(z)}},runtime:{onMessage:L(H),onMessageExternal:L(H),sendMessage:R.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:R.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},T={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return m.privacy={network:{"*":T},services:{"*":T},websites:{"*":T}},h(c,Q,m)};r.exports=o(chrome)}})})(B)),B.exports}var ve=we();const U=be(ve);function j(t,...e){}const Se={debug:(...t)=>j(console.debug,...t),log:(...t)=>j(console.log,...t),warn:(...t)=>j(console.warn,...t),error:(...t)=>j(console.error,...t)},W=class W extends Event{constructor(e,r){super(W.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=r}};q(W,"EVENT_NAME",Z("wxt:locationchange"));let Y=W;function Z(t){var e;return`${(e=U==null?void 0:U.runtime)==null?void 0:e.id}:content:${t}`}function Ce(t){let e,r;return{run(){e==null&&(r=new URL(location.href),e=t.setInterval(()=>{let n=new URL(location.href);n.href!==r.href&&(window.dispatchEvent(new Y(n,r)),r=n)},1e3))}}}const $=class ${constructor(e,r){q(this,"isTopFrame",window.self===window.top);q(this,"abortController");q(this,"locationWatcher",Ce(this));q(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return U.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,r){const n=setInterval(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearInterval(n)),n}setTimeout(e,r){const n=setTimeout(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearTimeout(n)),n}requestAnimationFrame(e){const r=requestAnimationFrame((...n)=>{this.isValid&&e(...n)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(e,r){const n=requestIdleCallback((...o)=>{this.signal.aborted||e(...o)},r);return this.onInvalidated(()=>cancelIdleCallback(n)),n}addEventListener(e,r,n,o){var c;r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(c=e.addEventListener)==null||c.call(e,r.startsWith("wxt:")?Z(r):r,n,{...o,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),Se.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:$.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var c,m,u;const r=((c=e.data)==null?void 0:c.type)===$.SCRIPT_STARTED_MESSAGE_TYPE,n=((m=e.data)==null?void 0:m.contentScriptName)===this.contentScriptName,o=!this.receivedMessageIds.has((u=e.data)==null?void 0:u.messageId);return r&&n&&o}listenForNewerScripts(e){let r=!0;const n=o=>{if(this.verifyScriptStartedEvent(o)){this.receivedMessageIds.add(o.data.messageId);const c=r;if(r=!1,c&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",n),this.onInvalidated(()=>removeEventListener("message",n))}};q($,"SCRIPT_STARTED_MESSAGE_TYPE",Z("wxt:content-script-started"));let J=$;const Te=Symbol("null");let Ee=0;class ke extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[r,n]of e)this.set(r,n)}}_getPublicKeys(e,r=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const n=this._getPrivateKey(e,r);let o;return n&&this._publicKeys.has(n)?o=this._publicKeys.get(n):r&&(o=[...e],this._publicKeys.set(n,o)),{privateKey:n,publicKey:o}}_getPrivateKey(e,r=!1){const n=[];for(let o of e){o===null&&(o=Te);const c=typeof o=="object"||typeof o=="function"?"_objectHashes":typeof o=="symbol"?"_symbolHashes":!1;if(!c)n.push(o);else if(this[c].has(o))n.push(this[c].get(o));else if(r){const m=`@@mkm-ref-${Ee++}@@`;this[c].set(o,m),n.push(m)}else return!1}return JSON.stringify(n)}set(e,r){const{publicKey:n}=this._getPublicKeys(e,!0);return super.set(n,r)}get(e){const{publicKey:r}=this._getPublicKeys(e);return super.get(r)}has(e){const{publicKey:r}=this._getPublicKeys(e);return super.has(r)}delete(e){const{publicKey:r,privateKey:n}=this._getPublicKeys(e);return!!(r&&super.delete(r)&&this._publicKeys.delete(n))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new ke;function qe(){}function G(t,...e){}const Pe={debug:(...t)=>G(console.debug,...t),log:(...t)=>G(console.log,...t),warn:(...t)=>G(console.warn,...t),error:(...t)=>G(console.error,...t)};return(async()=>{try{const{main:t,...e}=ue,r=new J("content",e);return await t(r)}catch(t){throw Pe.error('The content script "content" crashed on startup!',t),t}})()})();
content;
