import{c as k,u as n,d as U,r as t,j as e}from"./sidepanel-BlZUykQz.js";import{C as c,a as d,B as W,d as N}from"./badge-DdQVJnc0.js";import{B as $}from"./button-Bm5x_5Hu.js";import{I as X}from"./input-BVr-LE8P.js";import{C as w}from"./dialog-DTvUMXCX.js";import{M as ee}from"./openrouter-CtuvfVzy.js";import{C as f}from"./chevron-right-l_5BCnuW.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=k("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=k("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=k("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);function x({children:p}){return e.jsx("h2",{className:"text-[11px] font-medium uppercase tracking-wider text-muted-foreground mb-2",children:p})}function xe({onNavigateVoiceTraining:p}){const a=n(s=>s.apiKey),L=n(s=>s.setApiKey),G=n(s=>s.clearApiKey),m=n(s=>s.persistentGlow),V=n(s=>s.setPersistentGlow),y=n(s=>s.preferredModel),F=n(s=>s.setPreferredModel),{add:r}=U(),[R,g]=t.useState(!1),[l,v]=t.useState(a||""),[h,S]=t.useState(!1),[j,i]=t.useState(""),[o,b]=t.useState(!1),[u,B]=t.useState(0),[H,P]=t.useState(!1),[O,A]=t.useState(!1),[Y,I]=t.useState(!1),[D,M]=t.useState(!1),[E,z]=t.useState(!1);t.useEffect(()=>{const s=()=>{chrome.storage.local.get("voiceProfile",K=>{var T;K.voiceProfile&&B(((T=K.voiceProfile.exampleMessages)==null?void 0:T.length)||0)})};s();const C=()=>s();return chrome.storage.onChanged.addListener(C),()=>chrome.storage.onChanged.removeListener(C)},[]);const Z=a?`${a.slice(0,7)}${"•".repeat(Math.min(a.length-7,20))}`:"",_=async()=>{if(!l.trim()){i("Please enter an API key");return}S(!0),i("");try{const s=await fetch("https://openrouter.ai/api/v1/auth/key",{method:"GET",headers:{Authorization:`Bearer ${l.trim()}`}});s.ok&&(await s.json()).data?(L(l.trim()),g(!1),b(!1),r({type:"success",message:"API key updated successfully"})):i("Invalid API key")}catch{i("Failed to validate API key")}finally{S(!1)}},q=s=>{s.preventDefault(),_()},J=()=>{v(a||""),i(""),g(!1),b(!1)},Q={"google/gemini-2.0-flash-001":"Gemini 2.0 Flash","anthropic/claude-3.5-haiku":"Claude 3.5 Haiku","openai/gpt-4o-mini":"GPT-4o Mini"};return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(x,{children:"API Key"}),e.jsx(c,{variant:"default",children:e.jsx(d,{className:"p-3",children:R?e.jsxs("form",{onSubmit:q,className:"space-y-2.5",children:[e.jsx(X,{type:o?"text":"password",value:l,onChange:s=>v(s.target.value),placeholder:"sk-or-...",size:"sm",error:!!j,disabled:h}),j&&e.jsx("p",{className:"text-[11px] text-destructive",children:j}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{type:"button",onClick:J,disabled:h,variant:"ghost",size:"sm",className:"flex-1",children:"Cancel"}),e.jsx($,{type:"submit",disabled:!l.trim()||h,variant:"primary",size:"sm",className:"flex-1",children:h?"Validating...":"Save"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-xs text-foreground/80 font-mono truncate flex-1 mr-2",children:o?a:Z}),e.jsx("button",{onClick:()=>b(!o),className:"text-muted-foreground hover:text-foreground transition-colors p-1 rounded",type:"button","aria-label":o?"Hide API key":"Show API key",children:o?e.jsx(se,{size:14}):e.jsx(te,{size:14})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{variant:"success",dot:!0,size:"sm",children:"Connected"}),e.jsx("button",{onClick:()=>{g(!0),v(a||"")},className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Change"})]})]})})})]}),e.jsxs("div",{children:[e.jsx(x,{children:"AI Model"}),e.jsx(c,{variant:"default",children:e.jsxs(d,{className:"p-3 space-y-2",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Primary model for generation. Falls back to others if unavailable."}),e.jsx("div",{className:"space-y-1",children:ee.map(s=>e.jsxs("button",{onClick:()=>F(s),className:`
                    w-full flex items-center justify-between px-3 py-2 rounded-lg text-left transition-colors
                    ${y===s?"bg-primary/10 border border-primary/30":"hover:bg-card-hover border border-transparent"}
                  `,children:[e.jsx("span",{className:`text-sm ${y===s?"text-foreground font-medium":"text-muted-foreground"}`,children:Q[s]||s.split("/")[1]}),y===s&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})]},s))})]})})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Voice Training"}),e.jsx(c,{variant:"default",children:e.jsx(d,{className:"p-0",children:e.jsxs("button",{onClick:p,className:"w-full flex items-center justify-between p-3 hover:bg-card-hover transition-colors rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-muted flex items-center justify-center",children:e.jsx(ae,{size:14,className:"text-muted-foreground"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Train Your Voice"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:u>0?`${u} example${u!==1?"s":""} · ${u>=10?"Great":"Add more"}`:"No examples yet"})]})]}),e.jsx(f,{size:14,className:"text-muted-foreground"})]})})})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Appearance"}),e.jsx(c,{variant:"default",children:e.jsx(d,{className:"p-3",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground",children:"Page glow"}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:m?"Stays on while panel is open":"Fades after 10 seconds"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:s=>V(s.target.checked),className:"sr-only"}),e.jsx("div",{className:`
                  w-9 h-5 rounded-full transition-colors duration-200
                  ${m?"bg-primary":"bg-muted"}
                `,children:e.jsx("div",{className:`
                    w-4 h-4 bg-white rounded-full shadow-xs transform transition-transform duration-200
                    ${m?"translate-x-[18px]":"translate-x-[2px]"}
                    relative top-[2px]
                  `})})]})]})})})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Data"}),e.jsx(c,{variant:"default",children:e.jsxs(d,{className:"p-1",children:[e.jsxs("button",{onClick:()=>P(!0),disabled:D,className:"w-full flex items-center justify-between px-3 py-2.5 hover:bg-card-hover transition-colors rounded-lg text-left disabled:opacity-50",children:[e.jsx("span",{className:"text-sm text-foreground",children:D?"Clearing...":"Clear cache"}),e.jsx(f,{size:14,className:"text-muted-foreground"})]}),e.jsx("div",{className:"mx-3 border-t border-border/40"}),e.jsxs("button",{onClick:()=>A(!0),disabled:E,className:"w-full flex items-center justify-between px-3 py-2.5 hover:bg-card-hover transition-colors rounded-lg text-left disabled:opacity-50",children:[e.jsx("span",{className:"text-sm text-foreground",children:E?"Deleting...":"Delete conversations"}),e.jsx(f,{size:14,className:"text-muted-foreground"})]}),e.jsx("div",{className:"mx-3 border-t border-border/40"}),e.jsxs("button",{onClick:()=>I(!0),className:"w-full flex items-center justify-between px-3 py-2.5 hover:bg-card-hover transition-colors rounded-lg text-left",children:[e.jsx("span",{className:"text-sm text-destructive",children:"Reset everything"}),e.jsx(f,{size:14,className:"text-destructive/60"})]})]})})]}),e.jsx("div",{className:"text-center pb-2",children:e.jsx("p",{className:"text-[10px] text-muted-foreground/60",children:"v0.3.0 · Studio Drewskii"})}),H&&e.jsx(w,{title:"Clear Cache?",description:"This will delete all cached page analyses. Your conversations and settings will be preserved.",confirmLabel:"Clear Cache",onConfirm:async()=>{M(!0);try{await N.analysisCache.clear(),r({type:"success",message:"Cache cleared successfully"})}catch{r({type:"error",message:"Failed to clear cache"})}finally{M(!1)}},onClose:()=>P(!1)}),O&&e.jsx(w,{title:"Delete All Conversations?",description:"This will permanently delete all your conversation history. This action cannot be undone.",confirmLabel:"Delete All",onConfirm:async()=>{z(!0);try{await N.conversations.clear(),r({type:"success",message:"Conversations deleted"})}catch{r({type:"error",message:"Failed to delete conversations"})}finally{z(!1)}},onClose:()=>A(!1)}),Y&&e.jsx(w,{title:"Reset Everything?",description:"This will delete your API key, voice profile, all conversations, and cached data. This action cannot be undone.",confirmLabel:"Reset Everything",onConfirm:async()=>{try{G(),await N.delete(),chrome.storage.local.clear(),r({type:"success",message:"All data has been reset"})}catch{r({type:"error",message:"Failed to reset data"})}},onClose:()=>I(!1)})]})}export{xe as default};
