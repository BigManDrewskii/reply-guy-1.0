import{c as z,r as c,u as Q,d as ae,j as e,b as H}from"./sidepanel-90hatnpU.js";import{s as re,e as ie}from"./openrouter-Bhx_IZfW.js";import{d as ne,C as q,a as F,b as le,c as oe,B as P}from"./badge-xtkdSOar.js";import{e as ce,s as de,f as ue,A as K,C as me}from"./alert-DMOXoPDv.js";import{B as $}from"./button-D54yiX8W.js";import{M as X}from"./mic-B3-2RJ0t.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=z("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=z("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=z("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);function he(l){return l>=5?{score:95,label:"Optimal",suggestion:"Diminishing returns from more samples"}:l>=4?{score:90,label:"Excellent"}:l>=3?{score:75,label:"Strong"}:l>=2?{score:50,label:"Good",suggestion:"Add more samples for better matching"}:{score:25,label:"Basic",suggestion:"Add at least 4 more samples for reliable matching"}}function fe(l,i){return`You are an expert linguist specializing in authorial style analysis and stylometry.

Analyze the following ${l.length} writing samples from the SAME author. Your goal is to create a comprehensive, structured voice profile that would allow someone to perfectly replicate this person's writing style.

${i}

---

WRITING SAMPLES:
${l.map((n,m)=>`--- Sample ${m+1} ---
${n}`).join(`

`)}

---

Perform a 3-step analysis:

STEP 1 — REGISTER ANALYSIS (Biber's 6 dimensions):
Rate the author on each dimension from 1-10:
- involvedVsInformational: 1=personal/emotional, 10=detached/factual
- narrativeVsNonNarrative: 1=story-like, 10=expository
- situationDependentVsExplicit: 1=assumes context, 10=spells everything out
- nonPersuasiveVsPersuasive: 1=neutral/informative, 10=actively persuading
- concreteVsAbstract: 1=specific/tangible, 10=theoretical/conceptual
- casualVsFormalElaboration: 1=casual/simple, 10=formal/elaborate

STEP 2 — VOICE DNA EXTRACTION:
Identify:
- Tone (primary mood, secondary undertone, humor style, confidence level)
- Style descriptors (5-8 adjectives that capture the voice)
- Signature patterns (how they open, transition, close, and any catchphrases)
- Anti-patterns (things this writer NEVER does — be specific)
- Voice rules (5-10 actionable instructions for replicating this voice)

STEP 3 — STRUCTURED OUTPUT:
Return a JSON object with this EXACT schema (no markdown, no code blocks, just raw JSON):
{
  "register": {
    "involvedVsInformational": <1-10>,
    "narrativeVsNonNarrative": <1-10>,
    "situationDependentVsExplicit": <1-10>,
    "nonPersuasiveVsPersuasive": <1-10>,
    "concreteVsAbstract": <1-10>,
    "casualVsFormalElaboration": <1-10>
  },
  "tone": {
    "primary": "<single word>",
    "secondary": "<single word>",
    "humor": "<none|dry|sarcastic|self-deprecating|playful|witty>",
    "confidence": "<tentative|balanced|assertive|commanding>"
  },
  "descriptors": ["<5-8 style adjectives>"],
  "signatures": {
    "openingPatterns": ["<3-5 patterns, e.g. 'Starts with a direct observation'>"],
    "transitionWords": ["<5-8 favorite connectors>"],
    "closingPatterns": ["<3-5 patterns, e.g. 'Ends with a question'>"],
    "catchphrases": ["<2-5 recurring expressions or idioms>"]
  },
  "antiPatterns": ["<5-8 things this writer NEVER does>"],
  "rules": ["<5-10 actionable voice replication rules>"]
}

CRITICAL RULES:
- Base your analysis on ACTUAL EVIDENCE from the samples, not assumptions
- Anti-patterns are as important as positive patterns — be specific
- Rules must be actionable ("Use contractions freely" not "Is casual")
- Cross-reference your analysis with the quantitative metrics provided
- If the metrics show high contraction rate, the rules MUST mention contractions
- If the metrics show short sentences, the rules MUST mention sentence length`}function ye(){const[l,i]=c.useState(1),[n,m]=c.useState(""),[v,x]=c.useState(null),[s,o]=c.useState(null),[D,b]=c.useState(null),[T,w]=c.useState(!1),[S,p]=c.useState("idle"),[B,y]=c.useState(""),[O,h]=c.useState(null),L=Q(d=>d.apiKey),I=n.split("---").map(d=>d.trim()).filter(d=>d.length>0).length,U=c.useCallback(async()=>{if(!L){h("No API key configured");return}if(I<3){h("Please provide at least 3 example messages (5+ recommended)");return}w(!0),h(null),o(null),b(null),x(null);const d=n.split("---").map(u=>u.trim()).filter(u=>u.length>0);p("local-nlp"),y("Extracting quantitative style metrics...");let j;try{j=ce(d),o(j),b(de(j))}catch(u){console.warn("[useVoiceTraining] Local NLP analysis failed:",u),h("Failed to analyze writing samples locally"),w(!1),p("idle");return}p("llm-analysis"),y("Running AI voice analysis (register dimensions, tone, patterns)...");try{const u=ue(j),k=fe(d,u);let a="";await re([{role:"system",content:"You are an expert linguist and stylometry analyst. You produce precise, structured JSON analyses of writing styles. Never include markdown formatting in your output."},{role:"user",content:k}],L,{onChunk:t=>{a+=t,y(`Analyzing voice patterns... (${a.length} chars received)`)},onComplete:t=>{var N,f,E,M;try{p("building-profile"),y("Building structured voice profile...");const V=ie(t),r=JSON.parse(V);if(!r.register||!r.tone||!r.rules)throw new Error("Missing required fields in LLM response");const Y=d.slice(0,5).map(J=>({text:J,context:"outreach message",wordCount:J.split(/\s+/).length})),se=he(d.length),te={id:"default",createdAt:Date.now(),updatedAt:Date.now(),sampleCount:d.length,register:{involvedVsInformational:A(r.register.involvedVsInformational,1,10),narrativeVsNonNarrative:A(r.register.narrativeVsNonNarrative,1,10),situationDependentVsExplicit:A(r.register.situationDependentVsExplicit,1,10),nonPersuasiveVsPersuasive:A(r.register.nonPersuasiveVsPersuasive,1,10),concreteVsAbstract:A(r.register.concreteVsAbstract,1,10),casualVsFormalElaboration:A(r.register.casualVsFormalElaboration,1,10)},tone:{primary:r.tone.primary||"direct",secondary:r.tone.secondary||"warm",humor:r.tone.humor||"none",confidence:r.tone.confidence||"balanced"},descriptors:Array.isArray(r.descriptors)?r.descriptors.slice(0,8):[],signatures:{openingPatterns:((N=r.signatures)==null?void 0:N.openingPatterns)||[],transitionWords:((f=r.signatures)==null?void 0:f.transitionWords)||[],closingPatterns:((E=r.signatures)==null?void 0:E.closingPatterns)||[],catchphrases:((M=r.signatures)==null?void 0:M.catchphrases)||[]},antiPatterns:Array.isArray(r.antiPatterns)?r.antiPatterns.slice(0,8):[],rules:Array.isArray(r.rules)?r.rules.slice(0,10):[],metrics:j,exemplars:Y,quality:se};x(te),p("complete"),y("Voice profile complete!"),w(!1),i(3)}catch(V){console.error("[useVoiceTraining] Parse error:",V,`
Raw:`,t),h("Failed to parse voice analysis. Please try again."),w(!1),p("idle")}},onError:t=>{console.error("[useVoiceTraining] LLM error:",t),h(t.message),w(!1),p("idle")}})}catch(u){h(u instanceof Error?u.message:"Voice analysis failed"),w(!1),p("idle")}},[L,n,I]),G=c.useCallback(async()=>{if(v)try{await ne.voiceProfiles.put(v),chrome.storage.local.set({voiceProfile:v}),Q.getState().setVoiceProfileLoaded(!0),i(1),m(""),x(null),o(null),b(null),p("idle"),y("")}catch{h("Failed to save voice profile")}},[v]),W=c.useCallback(()=>{i(1),m(""),x(null),o(null),b(null),p("idle"),y(""),h(null)},[]);return{step:l,setStep:i,exampleMessages:n,setExampleMessages:m,messageCount:I,voiceProfile:v,localMetrics:s,localMetricsSummary:D,isExtracting:T,extractionStage:S,extractionProgress:B,error:O,analyzeVoice:U,saveVoiceProfile:G,reset:W}}function A(l,i,n){return Math.max(i,Math.min(n,Number(l)||i))}function ke({onBack:l}){const{step:i,setStep:n,exampleMessages:m,setExampleMessages:v,messageCount:x,voiceProfile:s,localMetrics:o,localMetricsSummary:D,isExtracting:b,extractionStage:T,extractionProgress:w,error:S,analyzeVoice:p,saveVoiceProfile:B,reset:y}=ye(),{add:O}=ae(),[h,L]=c.useState(!1),[I,U]=c.useState({register:!0,metrics:!1,patterns:!1,rules:!1,exemplars:!1});c.useEffect(()=>{chrome.storage.local.get("voiceProfile",a=>{a.voiceProfile&&L(!0)})},[]),c.useEffect(()=>{i===2&&s&&!b&&n(3)},[i,s,b,n]),c.useEffect(()=>{i===2&&!b&&!s&&!S&&p()},[i,b,s,S,p]);const G=a=>{U(t=>({...t,[a]:!t[a]}))},W=async()=>{await B(),O({type:"success",message:"Voice profile saved successfully"}),l&&l()},d=()=>{l&&(y(),l())},j=({current:a})=>e.jsx("div",{className:"flex items-center gap-2 mb-5",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-semibold transition-all duration-300 ${t<a?"bg-primary text-primary-foreground":t===a?"bg-primary text-primary-foreground ring-2 ring-primary/30 ring-offset-1 ring-offset-background":"bg-muted text-muted-foreground"}`,children:t<a?e.jsx(H,{size:10}):t}),t<3&&e.jsx("div",{className:`flex-1 h-0.5 rounded-full transition-colors duration-300 ${t<a?"bg-primary":"bg-muted"}`})]},t))}),u=()=>e.jsxs("div",{className:"flex items-center gap-2.5 mb-1",children:[e.jsx("button",{onClick:d,className:"text-muted-foreground hover:text-foreground transition-colors p-1 -ml-1 rounded-md","aria-label":"Back to settings",children:e.jsx(xe,{size:16})}),e.jsx(R,{size:16,className:"text-primary"}),e.jsx("h2",{className:"text-sm font-semibold text-foreground",children:"Voice Training"})]}),k=({id:a,title:t,icon:N,children:f,badge:E})=>{const M=I[a]??!1;return e.jsxs(q,{variant:"default",children:[e.jsxs("button",{onClick:()=>G(a),className:"w-full flex items-center justify-between px-3.5 py-2.5 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{size:13,className:"text-muted-foreground"}),e.jsx("span",{className:"text-xs font-semibold text-foreground",children:t}),E&&e.jsx(P,{variant:"outline",size:"sm",children:E})]}),M?e.jsx(pe,{size:13,className:"text-muted-foreground"}):e.jsx(me,{size:13,className:"text-muted-foreground"})]}),M&&e.jsx(F,{className:"pt-0 pb-3 px-3.5 border-t border-border/30",children:f})]})};if(i===1){const a=x>=15?{text:"Optimal",color:"text-success"}:x>=10?{text:"Excellent",color:"text-success"}:x>=5?{text:"Good",color:"text-primary"}:x>=3?{text:"Minimum",color:"text-warning"}:{text:"Need more",color:"text-muted-foreground"};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{}),e.jsx(j,{current:1}),h&&e.jsx(K,{variant:"warning",children:"You have an existing voice profile. Training will replace it."}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[13px] text-foreground font-medium mb-1",children:"Paste your writing samples"}),e.jsxs("p",{className:"text-xs text-muted-foreground leading-relaxed",children:["Add 5-20 example messages, DMs, or posts that represent your natural voice. Separate each with ",e.jsx("code",{className:"text-[10px] bg-muted px-1 py-0.5 rounded",children:"---"})]})]}),e.jsx("textarea",{value:m,onChange:t=>v(t.target.value),placeholder:`Hey! Saw your post about design systems...

---

That's a really interesting take. I've been working on something similar...

---

Would love to chat more about this. Free for a quick call?`,className:"w-full h-52 px-3 py-2.5 bg-background border border-border/60 rounded-lg text-[13px] leading-relaxed text-foreground placeholder-muted-foreground/40 focus:outline-none focus:ring-2 focus:ring-ring/40 focus:border-ring resize-none font-mono transition-colors"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[11px] tabular-nums text-muted-foreground",children:[x," sample",x!==1?"s":""]}),e.jsx("span",{className:`text-[10px] font-medium ${a.color}`,children:a.text})]}),e.jsx("div",{className:"flex gap-0.5",children:Array.from({length:5}).map((t,N)=>e.jsx("div",{className:`w-5 h-1 rounded-full transition-colors duration-300 ${N<Math.min(5,Math.ceil(x/4))?"bg-primary":"bg-muted"}`},N))})]}),S&&e.jsx("p",{className:"text-[11px] text-destructive",children:S}),e.jsxs($,{onClick:()=>n(2),disabled:x<3,variant:"primary",size:"md",className:"w-full",children:[e.jsx(R,{size:14,className:"mr-1.5"}),"Analyze My Voice"]}),e.jsx("p",{className:"text-[10px] text-muted-foreground/60 text-center leading-relaxed",children:"Your samples are analyzed locally first, then sent to AI for deep style extraction. Nothing is stored externally."})]})}if(i===2){const a=[{key:"local-nlp",label:"Local NLP Analysis",description:"Extracting quantitative style metrics",icon:Z},{key:"llm-analysis",label:"AI Voice Extraction",description:"Register dimensions, tone, patterns",icon:_},{key:"building-profile",label:"Building Profile",description:"Assembling structured voice fingerprint",icon:R}],t=["idle","local-nlp","llm-analysis","building-profile","complete"],N=t.indexOf(T);return e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{}),e.jsx(j,{current:2}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[13px] text-foreground font-medium mb-1",children:"Analyzing your voice"}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:w||"Starting analysis pipeline..."})]}),e.jsx(q,{variant:"default",children:e.jsx(F,{className:"py-3 space-y-3",children:a.map((f,E)=>{const M=t.indexOf(f.key),V=T===f.key,r=N>M,Y=f.icon;return e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center flex-shrink-0 transition-all duration-500 ${r?"bg-success/15 text-success":V?"bg-primary/15 text-primary animate-pulse":"bg-muted text-muted-foreground"}`,children:r?e.jsx(H,{size:12}):e.jsx(Y,{size:12})}),e.jsxs("div",{className:"flex-1 min-w-0 pt-0.5",children:[e.jsx("p",{className:`text-xs font-medium transition-colors duration-300 ${r||V?"text-foreground":"text-muted-foreground"}`,children:f.label}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-0.5",children:f.description})]})]},f.key)})})}),o&&e.jsxs(q,{variant:"default",children:[e.jsx(le,{children:e.jsx(oe,{children:"Quick Metrics"})}),e.jsxs(F,{className:"space-y-2.5",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground leading-relaxed",children:D}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(g,{label:"Readability",value:o.readabilityGrade,max:100}),e.jsx(g,{label:"Formality",value:o.formalityScore,max:100}),e.jsx(g,{label:"Avg sentence",value:o.sentenceLengthMean,suffix:" words"}),e.jsx(g,{label:"Vocab richness",value:Math.round(o.vocabularyRichness*100),suffix:"%"})]})]})]}),S&&e.jsx(K,{variant:"error",action:{label:"Go back",onClick:()=>n(1)},children:S}),e.jsx($,{onClick:()=>{y(),n(1)},variant:"ghost",size:"sm",className:"w-full",children:"Cancel"})]})}return i===3&&s?e.jsxs("div",{className:"space-y-3",children:[e.jsx(u,{}),e.jsx(j,{current:3}),e.jsxs("div",{className:"flex items-center justify-between bg-card border border-border/40 rounded-lg px-3.5 py-2.5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[13px] font-medium text-foreground",children:"Voice Fingerprint"}),e.jsxs("p",{className:"text-[10px] text-muted-foreground mt-0.5",children:[s.sampleCount," samples analyzed"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-sm font-bold tabular-nums ${s.quality.score>=90?"text-success":s.quality.score>=70?"text-primary":"text-warning"}`,children:[s.quality.score,"%"]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:s.quality.label})]})]}),e.jsx(q,{variant:"default",children:e.jsxs(F,{className:"py-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(X,{size:12,className:"text-muted-foreground"}),e.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Voice Identity"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"info",size:"sm",children:s.tone.primary}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"+"}),e.jsx(P,{variant:"outline",size:"sm",children:s.tone.secondary}),s.tone.humor!=="none"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"·"}),e.jsxs(P,{variant:"outline",size:"sm",children:[s.tone.humor," humor"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:s.descriptors.map((a,t)=>e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-muted text-muted-foreground",children:a},t))}),e.jsxs("div",{className:"pt-2 border-t border-border/30",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground mb-1",children:"Confidence"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${s.tone.confidence==="commanding"?"bg-primary w-full":s.tone.confidence==="assertive"?"bg-primary w-3/4":s.tone.confidence==="balanced"?"bg-primary/70 w-1/2":"bg-primary/50 w-1/4"}`})}),e.jsx("span",{className:"text-[10px] text-foreground font-medium capitalize",children:s.tone.confidence})]})]})]})}),e.jsx(k,{id:"register",title:"Register Dimensions",icon:Z,badge:"Biber's 6D",children:e.jsxs("div",{className:"space-y-2.5 mt-2",children:[e.jsx(C,{label:"Involved ↔ Informational",value:s.register.involvedVsInformational,leftLabel:"Personal",rightLabel:"Factual"}),e.jsx(C,{label:"Narrative ↔ Non-narrative",value:s.register.narrativeVsNonNarrative,leftLabel:"Story-like",rightLabel:"Expository"}),e.jsx(C,{label:"Situation ↔ Explicit",value:s.register.situationDependentVsExplicit,leftLabel:"Contextual",rightLabel:"Explicit"}),e.jsx(C,{label:"Neutral ↔ Persuasive",value:s.register.nonPersuasiveVsPersuasive,leftLabel:"Neutral",rightLabel:"Persuasive"}),e.jsx(C,{label:"Concrete ↔ Abstract",value:s.register.concreteVsAbstract,leftLabel:"Concrete",rightLabel:"Abstract"}),e.jsx(C,{label:"Casual ↔ Formal",value:s.register.casualVsFormalElaboration,leftLabel:"Casual",rightLabel:"Formal"})]})}),o&&e.jsxs(k,{id:"metrics",title:"Style Metrics",icon:R,badge:`${s.sampleCount} samples`,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2.5 mt-2",children:[e.jsx(g,{label:"Readability",value:o.readabilityGrade,max:100}),e.jsx(g,{label:"Formality",value:o.formalityScore,max:100}),e.jsx(g,{label:"Avg sentence",value:o.sentenceLengthMean,suffix:" words"}),e.jsx(g,{label:"Vocab richness",value:Math.round(o.vocabularyRichness*100),suffix:"%"}),e.jsx(g,{label:"Questions",value:Math.round(o.questionRatio*100),suffix:"%"}),e.jsx(g,{label:"Contractions",value:Math.round(o.contractionRate*100),suffix:"%"}),e.jsx(g,{label:"Active voice",value:Math.round(o.activeVoiceRatio*100),suffix:"%"}),e.jsx(g,{label:"Exclamations",value:Math.round(o.exclamationRatio*100),suffix:"%"})]}),o.topBigrams.length>0&&e.jsxs("div",{className:"mt-3 pt-2.5 border-t border-border/30",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mb-1.5",children:"Signature phrases"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:o.topBigrams.slice(0,8).map(([a],t)=>e.jsx(P,{variant:"outline",size:"sm",children:a},t))})]})]}),e.jsx(k,{id:"patterns",title:"Signature Patterns",icon:_,children:e.jsxs("div",{className:"space-y-3 mt-2",children:[s.signatures.openingPatterns.length>0&&e.jsx(ee,{label:"Opening Patterns",items:s.signatures.openingPatterns}),s.signatures.closingPatterns.length>0&&e.jsx(ee,{label:"Closing Patterns",items:s.signatures.closingPatterns}),s.signatures.transitionWords.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mb-1.5",children:"Transition Words"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.signatures.transitionWords.map((a,t)=>e.jsx(P,{variant:"outline",size:"sm",children:a},t))})]}),s.signatures.catchphrases.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mb-1.5",children:"Catchphrases"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.signatures.catchphrases.map((a,t)=>e.jsxs(P,{variant:"info",size:"sm",children:['"',a,'"']},t))})]})]})}),e.jsx(k,{id:"rules",title:"Voice Rules",icon:ge,badge:`${s.rules.length} rules`,children:e.jsxs("div",{className:"space-y-3 mt-2",children:[s.rules.length>0&&e.jsx("div",{className:"space-y-1.5",children:s.rules.map((a,t)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(H,{size:10,className:"text-success mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-[11px] text-foreground leading-relaxed",children:a})]},t))}),s.antiPatterns.length>0&&e.jsxs("div",{className:"pt-2.5 border-t border-border/30",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-destructive/70 mb-1.5",children:"Never Do"}),e.jsx("div",{className:"space-y-1.5",children:s.antiPatterns.map((a,t)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-destructive text-[10px] mt-0.5 flex-shrink-0",children:"✕"}),e.jsx("p",{className:"text-[11px] text-muted-foreground leading-relaxed",children:a})]},t))})]})]})}),e.jsx(k,{id:"exemplars",title:"Stored Exemplars",icon:X,badge:`${s.exemplars.length} samples`,children:e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground leading-relaxed",children:"These actual writing samples are injected into every generation prompt for 23.5x better style matching."}),s.exemplars.map((a,t)=>e.jsxs("div",{className:"bg-muted/50 rounded-md px-2.5 py-2 border border-border/20",children:[e.jsx("p",{className:"text-[11px] text-foreground leading-relaxed line-clamp-3 font-mono",children:a.text}),e.jsxs("p",{className:"text-[9px] text-muted-foreground mt-1 tabular-nums",children:[a.wordCount," words · ",a.context]})]},t))]})}),e.jsxs("div",{className:"flex gap-2 pt-1",children:[e.jsx($,{onClick:()=>n(1),variant:"ghost",size:"sm",className:"flex-1",children:"Redo"}),e.jsxs($,{onClick:W,variant:"primary",size:"sm",className:"flex-1",children:[e.jsx(R,{size:13,className:"mr-1.5"}),"Save Profile"]})]}),s.quality.suggestion&&e.jsx("p",{className:"text-[10px] text-muted-foreground/60 text-center",children:s.quality.suggestion})]}):null}function g({label:l,value:i,max:n,suffix:m}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:l}),e.jsxs("span",{className:"text-[11px] font-medium tabular-nums text-foreground",children:[Math.round(i),m||""]})]}),n&&e.jsx("div",{className:"h-1 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary/60 rounded-full transition-all duration-500",style:{width:`${Math.min(100,i/n*100)}%`}})})]})}function C({label:l,value:i,leftLabel:n,rightLabel:m}){const v=(i-1)/9*100;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:n}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:m})]}),e.jsx("div",{className:"relative h-1.5 bg-muted rounded-full",children:e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-2.5 h-2.5 rounded-full bg-primary border-2 border-background shadow-sm transition-all duration-500",style:{left:`calc(${v}% - 5px)`}})}),e.jsxs("p",{className:"text-[9px] text-muted-foreground/60 text-center tabular-nums",children:[i,"/10"]})]})}function ee({label:l,items:i}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mb-1.5",children:l}),e.jsx("div",{className:"space-y-1",children:i.map((n,m)=>e.jsx("p",{className:"text-[11px] text-foreground/80 leading-relaxed pl-2 border-l-2 border-border/40",children:n},m))})]})}export{ke as default};
