import{c as w,u as i,e as J,r as t,j as e}from"./sidepanel-DS6lTU98.js";import{C as m,a as h,B as Q,d as C}from"./badge-4w6LEc2_.js";import{B as T}from"./button-BEKyJbm1.js";import{I as U}from"./input-DGpsbVHk.js";import{C as N}from"./dialog-CZ-gj8bi.js";import{C as u}from"./chevron-right-EUbagQ5C.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=w("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=w("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=w("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);function f({children:p}){return e.jsx("h2",{className:"text-[11px] font-medium uppercase tracking-wider text-muted-foreground mb-2",children:p})}function le({onNavigateVoiceTraining:p}){const a=i(s=>s.apiKey),V=i(s=>s.setApiKey),$=i(s=>s.clearApiKey),c=i(s=>s.persistentGlow),L=i(s=>s.setPersistentGlow),{add:r}=J(),[R,y]=t.useState(!1),[l,g]=t.useState(a||""),[d,k]=t.useState(!1),[v,n]=t.useState(""),[o,j]=t.useState(!1),[x,G]=t.useState(0),[B,S]=t.useState(!1),[F,A]=t.useState(!1),[O,P]=t.useState(!1),[D,I]=t.useState(!1),[z,E]=t.useState(!1);t.useEffect(()=>{const s=()=>{chrome.storage.local.get("voiceProfile",K=>{var M;K.voiceProfile&&G(((M=K.voiceProfile.exampleMessages)==null?void 0:M.length)||0)})};s();const b=()=>s();return chrome.storage.onChanged.addListener(b),()=>chrome.storage.onChanged.removeListener(b)},[]);const Y=a?`${a.slice(0,7)}${"•".repeat(Math.min(a.length-7,20))}`:"",H=async()=>{if(!l.trim()){n("Please enter an API key");return}k(!0),n("");try{const s=await fetch("https://openrouter.ai/api/v1/auth/key",{method:"GET",headers:{Authorization:`Bearer ${l.trim()}`}});s.ok&&(await s.json()).data?(V(l.trim()),y(!1),j(!1),r({type:"success",message:"API key updated successfully"})):n("Invalid API key")}catch{n("Failed to validate API key")}finally{k(!1)}},Z=s=>{s.preventDefault(),H()},q=()=>{g(a||""),n(""),y(!1),j(!1)};return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(f,{children:"API Key"}),e.jsx(m,{variant:"default",children:e.jsx(h,{className:"p-3",children:R?e.jsxs("form",{onSubmit:Z,className:"space-y-2.5",children:[e.jsx(U,{type:o?"text":"password",value:l,onChange:s=>g(s.target.value),placeholder:"sk-or-...",size:"sm",error:!!v,disabled:d}),v&&e.jsx("p",{className:"text-[11px] text-destructive",children:v}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{type:"button",onClick:q,disabled:d,variant:"ghost",size:"sm",className:"flex-1",children:"Cancel"}),e.jsx(T,{type:"submit",disabled:!l.trim()||d,variant:"primary",size:"sm",className:"flex-1",children:d?"Validating...":"Save"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-xs text-foreground/80 font-mono truncate flex-1 mr-2",children:o?a:Y}),e.jsx("button",{onClick:()=>j(!o),className:"text-muted-foreground hover:text-foreground transition-colors p-1 rounded",type:"button","aria-label":o?"Hide API key":"Show API key",children:o?e.jsx(W,{size:14}):e.jsx(X,{size:14})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Q,{variant:"success",dot:!0,size:"sm",children:"Connected"}),e.jsx("button",{onClick:()=>{y(!0),g(a||"")},className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Change"})]})]})})})]}),e.jsxs("div",{children:[e.jsx(f,{children:"Voice Training"}),e.jsx(m,{variant:"default",children:e.jsx(h,{className:"p-0",children:e.jsxs("button",{onClick:p,className:"w-full flex items-center justify-between p-3 hover:bg-card-hover transition-colors rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-muted flex items-center justify-center",children:e.jsx(_,{size:14,className:"text-muted-foreground"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Train Your Voice"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:x>0?`${x} example${x!==1?"s":""} · ${x>=10?"Great":"Add more"}`:"No examples yet"})]})]}),e.jsx(u,{size:14,className:"text-muted-foreground"})]})})})]}),e.jsxs("div",{children:[e.jsx(f,{children:"Appearance"}),e.jsx(m,{variant:"default",children:e.jsx(h,{className:"p-3",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground",children:"Page glow"}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:c?"Stays on while panel is open":"Fades after 10 seconds"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:s=>L(s.target.checked),className:"sr-only"}),e.jsx("div",{className:`
                  w-9 h-5 rounded-full transition-colors duration-200
                  ${c?"bg-primary":"bg-muted"}
                `,children:e.jsx("div",{className:`
                    w-4 h-4 bg-white rounded-full shadow-xs transform transition-transform duration-200
                    ${c?"translate-x-[18px]":"translate-x-[2px]"}
                    relative top-[2px]
                  `})})]})]})})})]}),e.jsxs("div",{children:[e.jsx(f,{children:"Data"}),e.jsx(m,{variant:"default",children:e.jsxs(h,{className:"p-1",children:[e.jsxs("button",{onClick:()=>S(!0),disabled:D,className:"w-full flex items-center justify-between px-3 py-2.5 hover:bg-card-hover transition-colors rounded-lg text-left disabled:opacity-50",children:[e.jsx("span",{className:"text-sm text-foreground",children:D?"Clearing...":"Clear cache"}),e.jsx(u,{size:14,className:"text-muted-foreground"})]}),e.jsx("div",{className:"mx-3 border-t border-border/40"}),e.jsxs("button",{onClick:()=>A(!0),disabled:z,className:"w-full flex items-center justify-between px-3 py-2.5 hover:bg-card-hover transition-colors rounded-lg text-left disabled:opacity-50",children:[e.jsx("span",{className:"text-sm text-foreground",children:z?"Deleting...":"Delete conversations"}),e.jsx(u,{size:14,className:"text-muted-foreground"})]}),e.jsx("div",{className:"mx-3 border-t border-border/40"}),e.jsxs("button",{onClick:()=>P(!0),className:"w-full flex items-center justify-between px-3 py-2.5 hover:bg-card-hover transition-colors rounded-lg text-left",children:[e.jsx("span",{className:"text-sm text-destructive",children:"Reset everything"}),e.jsx(u,{size:14,className:"text-destructive/60"})]})]})})]}),e.jsx("div",{className:"text-center pb-2",children:e.jsx("p",{className:"text-[10px] text-muted-foreground/60",children:"v0.1.0 · Studio Drewskii"})}),B&&e.jsx(N,{title:"Clear Cache?",description:"This will delete all cached page analyses. Your conversations and settings will be preserved.",confirmLabel:"Clear Cache",onConfirm:async()=>{I(!0);try{await C.analysisCache.clear(),r({type:"success",message:"Cache cleared successfully"})}catch{r({type:"error",message:"Failed to clear cache"})}finally{I(!1)}},onClose:()=>S(!1)}),F&&e.jsx(N,{title:"Delete All Conversations?",description:"This will permanently delete all your conversation history. This action cannot be undone.",confirmLabel:"Delete All",onConfirm:async()=>{E(!0);try{await C.conversations.clear(),r({type:"success",message:"Conversations deleted"})}catch{r({type:"error",message:"Failed to delete conversations"})}finally{E(!1)}},onClose:()=>A(!1)}),O&&e.jsx(N,{title:"Reset Everything?",description:"This will delete your API key, voice profile, all conversations, and cached data. This action cannot be undone.",confirmLabel:"Reset Everything",onConfirm:async()=>{try{$(),await C.delete(),chrome.storage.local.clear(),r({type:"success",message:"All data has been reset"})}catch{r({type:"error",message:"Failed to reset data"})}},onClose:()=>P(!1)})]})}export{le as default};
