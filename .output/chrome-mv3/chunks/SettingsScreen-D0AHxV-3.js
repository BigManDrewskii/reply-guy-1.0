import{c as j,u as c,e as q,r as a,j as e}from"./sidepanel-D7LXy8vl.js";import{B as K,d as g}from"./badge-D08nYiI0.js";import{C as E,a as M}from"./card-Cy_DCTpp.js";import{B as l}from"./button-nkOSNevf.js";import{I as J}from"./input-B79U8FWg.js";import{C as v}from"./dialog-DJmp8J32.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=j("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=j("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=j("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);function le({onNavigateVoiceTraining:b}){const t=c(s=>s.apiKey),T=c(s=>s.setApiKey),G=c(s=>s.clearApiKey),d=c(s=>s.persistentGlow),V=c(s=>s.setPersistentGlow),{add:r}=q(),[L,x]=a.useState(!1),[i,f]=a.useState(t||""),[m,C]=a.useState(!1),[u,n]=a.useState(""),[o,y]=a.useState(!1),[h,R]=a.useState(0),[B,w]=a.useState(!1),[$,N]=a.useState(!1),[F,k]=a.useState(!1),[S,A]=a.useState(!1),[I,P]=a.useState(!1);a.useEffect(()=>{const s=()=>{chrome.storage.local.get("voiceProfile",D=>{var z;D.voiceProfile&&R(((z=D.voiceProfile.exampleMessages)==null?void 0:z.length)||0)})};s();const p=()=>s();return chrome.storage.onChanged.addListener(p),()=>chrome.storage.onChanged.removeListener(p)},[]);const O=t?`${t.slice(0,7)}${"•".repeat(Math.min(t.length-7,20))}`:"",Y=async()=>{if(!i.trim()){n("Please enter an API key");return}C(!0),n("");try{const s=await fetch("https://openrouter.ai/api/v1/auth/key",{method:"GET",headers:{Authorization:`Bearer ${i.trim()}`}});s.ok&&(await s.json()).data?(T(i.trim()),x(!1),y(!1),r({type:"success",message:"API key updated successfully"})):n("Invalid API key")}catch{n("Failed to validate API key")}finally{C(!1)}},H=s=>{s.preventDefault(),Y()},U=()=>{f(t||""),n(""),x(!1),y(!1)},Z=()=>{b&&b()};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold leading-tight text-foreground mb-3",children:"API Key"}),L?e.jsxs("form",{onSubmit:H,className:"space-y-3",children:[e.jsx(J,{type:o?"text":"password",value:i,onChange:s=>f(s.target.value),placeholder:"sk-or-...",variant:"bordered",size:"md",error:!!u,disabled:m}),u&&e.jsx("p",{className:"text-xs leading-normal text-destructive",children:u}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{type:"button",onClick:U,disabled:m,variant:"secondary",size:"md",className:"flex-1",children:"Cancel"}),e.jsx(l,{type:"submit",disabled:!i.trim()||m,variant:"primary",size:"md",className:"flex-1",children:m?"Validating...":"Save"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(E,{variant:"default",children:e.jsxs(M,{className:"px-4 py-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-[13px] leading-relaxed text-foreground font-mono",children:o?t:O}),e.jsx("button",{onClick:()=>y(!o),className:"text-muted-foreground hover:text-foreground ml-2 flex items-center",type:"button","aria-label":o?"Hide API key":"Show API key",children:o?e.jsx(Q,{size:16}):e.jsx(W,{size:16})})]})}),e.jsx(K,{variant:"success",dot:!0,size:"md",children:"Connected"}),e.jsx(l,{onClick:()=>{x(!0),f(t||"")},variant:"secondary",size:"md",className:"w-full",children:"Update API Key"})]})]}),e.jsxs("div",{className:"border-t border-border pt-4",children:[e.jsx("h2",{className:"text-base font-semibold leading-tight text-foreground mb-3",children:"Voice Training"}),e.jsxs(l,{onClick:Z,variant:"secondary",size:"md",className:"w-full",children:[e.jsx(X,{size:16,className:"mr-2"}),"Train Your Voice →"]}),h>0?e.jsx("div",{className:"mt-2 text-center",children:e.jsxs(K,{variant:h>=10?"success":"warning",size:"sm",children:[h," examples · ",h>=10?"Great":"Add more"]})}):e.jsx("p",{className:"text-xs leading-normal text-muted-foreground mt-2 text-center",children:"No examples yet"})]}),e.jsxs("div",{className:"border-t border-border pt-4",children:[e.jsx("h2",{className:"text-base font-semibold leading-tight text-foreground mb-3",children:"Appearance"}),e.jsx(E,{variant:"default",children:e.jsxs(M,{className:"px-4 py-3",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsx("span",{className:"text-[13px] leading-relaxed text-foreground",children:"Keep page glow on"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:s=>V(s.target.checked),className:"sr-only"}),e.jsx("div",{className:`
                  w-10 h-6 rounded-full transition-colors duration-200
                  ${d?"bg-accent":"bg-muted"}
                `,children:e.jsx("div",{className:`
                    w-5 h-5 bg-white rounded-full shadow-sm transform transition-transform duration-200
                    ${d?"translate-x-5":"translate-x-0.5"}
                    relative top-0.5
                  `})})]})]}),e.jsx("p",{className:"text-[11px] leading-normal text-muted-foreground mt-2",children:d?"Glow stays on while side panel is open":"Glow fades after 10 seconds"})]})})]}),e.jsxs("div",{className:"border-t border-border pt-4",children:[e.jsx("h2",{className:"text-base font-semibold leading-tight text-foreground mb-3",children:"Data"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{onClick:()=>w(!0),variant:"ghost",size:"md",className:"w-full justify-start",disabled:S,children:S?"Clearing...":"Clear cache"}),e.jsx(l,{onClick:()=>N(!0),variant:"ghost",size:"md",className:"w-full justify-start",disabled:I,children:I?"Deleting...":"Delete conversations"}),e.jsx(l,{onClick:()=>k(!0),variant:"danger",size:"md",className:"w-full justify-start",children:"Reset everything"})]})]}),e.jsx("div",{className:"border-t border-border pt-4 text-center",children:e.jsx("p",{className:"text-[10px] leading-normal text-muted-foreground",children:"v0.1.0 · Studio Drewskii"})}),B&&e.jsx(v,{title:"Clear Cache?",description:"This will delete all cached page analyses. Your conversations and settings will be preserved.",confirmLabel:"Clear Cache",onConfirm:async()=>{A(!0);try{await g.analysisCache.clear(),r({type:"success",message:"Cache cleared successfully"})}catch{r({type:"error",message:"Failed to clear cache"})}finally{A(!1)}},onClose:()=>w(!1)}),$&&e.jsx(v,{title:"Delete All Conversations?",description:"This will permanently delete all your conversation history. This action cannot be undone.",confirmLabel:"Delete All",onConfirm:async()=>{P(!0);try{await g.conversations.clear(),r({type:"success",message:"Conversations deleted"})}catch{r({type:"error",message:"Failed to delete conversations"})}finally{P(!1)}},onClose:()=>N(!1)}),F&&e.jsx(v,{title:"Reset Everything?",description:"This will delete your API key, voice profile, all conversations, and cached data. This action cannot be undone.",confirmLabel:"Reset Everything",onConfirm:async()=>{try{G(),await g.delete(),chrome.storage.local.clear(),r({type:"success",message:"All data has been reset"})}catch{r({type:"error",message:"Failed to reset data"})}},onClose:()=>k(!1)})]})}export{le as default};
