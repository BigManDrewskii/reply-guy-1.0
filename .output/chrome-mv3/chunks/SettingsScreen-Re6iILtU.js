import{c as B,u as n,d as ae,r as t,j as e}from"./sidepanel-90hatnpU.js";import{C as x,a as u,B as re,d as w}from"./badge-xtkdSOar.js";import{B as V}from"./button-D54yiX8W.js";import{I as ne}from"./input-Sx769Ctb.js";import{C as k}from"./dialog-R3ABzJxx.js";import{M as le}from"./openrouter-Bhx_IZfW.js";import{M as ie}from"./mic-B3-2RJ0t.js";import{C as p}from"./chevron-right-DFEpoqav.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=B("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=B("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function m({children:g}){return e.jsx("h2",{className:"text-[11px] font-medium uppercase tracking-wider text-muted-foreground mb-2",children:g})}function ye({onNavigateVoiceTraining:g}){const a=n(s=>s.apiKey),H=n(s=>s.setApiKey),O=n(s=>s.clearApiKey),h=n(s=>s.persistentGlow),Y=n(s=>s.setPersistentGlow),y=n(s=>s.preferredModel),q=n(s=>s.setPreferredModel),{add:r}=ae(),[_,j]=t.useState(!1),[i,v]=t.useState(a||""),[f,S]=t.useState(!1),[b,l]=t.useState(""),[o,C]=t.useState(!1),[c,P]=t.useState(0),[J,A]=t.useState(!1),[Q,D]=t.useState(!1),[U,I]=t.useState(!1),[W,M]=t.useState(!1),[E,z]=t.useState(!1),[K,T]=t.useState(!1);t.useEffect(()=>{const s=()=>{chrome.storage.local.get("voiceProfile",$=>{var L,R,F;if($.voiceProfile){const d=$.voiceProfile,G=!!(d.registerDimensions||d.quantitativeAnchors);A(G),P(G?((L=d.exemplars)==null?void 0:L.length)||((R=d.exampleMessages)==null?void 0:R.length)||0:((F=d.exampleMessages)==null?void 0:F.length)||0)}else A(!1),P(0)})};s();const N=()=>s();return chrome.storage.onChanged.addListener(N),()=>chrome.storage.onChanged.removeListener(N)},[]);const X=a?`${a.slice(0,7)}${"•".repeat(Math.min(a.length-7,20))}`:"",Z=async()=>{if(!i.trim()){l("Please enter an API key");return}S(!0),l("");try{const s=await fetch("https://openrouter.ai/api/v1/auth/key",{method:"GET",headers:{Authorization:`Bearer ${i.trim()}`}});s.ok&&(await s.json()).data?(H(i.trim()),j(!1),C(!1),r({type:"success",message:"API key updated successfully"})):l("Invalid API key")}catch{l("Failed to validate API key")}finally{S(!1)}},ee=s=>{s.preventDefault(),Z()},se=()=>{v(a||""),l(""),j(!1),C(!1)},te={"google/gemini-2.0-flash-001":"Gemini 2.0 Flash","anthropic/claude-3.5-haiku":"Claude 3.5 Haiku","openai/gpt-4o-mini":"GPT-4o Mini"};return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(m,{children:"API Key"}),e.jsx(x,{variant:"default",children:e.jsx(u,{className:"p-3",children:_?e.jsxs("form",{onSubmit:ee,className:"space-y-2.5",children:[e.jsx(ne,{type:o?"text":"password",value:i,onChange:s=>v(s.target.value),placeholder:"sk-or-...",size:"sm",error:!!b,disabled:f}),b&&e.jsx("p",{className:"text-[11px] text-destructive",children:b}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(V,{type:"button",onClick:se,disabled:f,variant:"ghost",size:"sm",className:"flex-1",children:"Cancel"}),e.jsx(V,{type:"submit",disabled:!i.trim()||f,variant:"primary",size:"sm",className:"flex-1",children:f?"Validating...":"Save"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-xs text-foreground/80 font-mono truncate flex-1 mr-2",children:o?a:X}),e.jsx("button",{onClick:()=>C(!o),className:"text-muted-foreground hover:text-foreground transition-colors p-1 rounded",type:"button","aria-label":o?"Hide API key":"Show API key",children:o?e.jsx(oe,{size:14}):e.jsx(ce,{size:14})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{variant:"success",dot:!0,size:"sm",children:"Connected"}),e.jsx("button",{onClick:()=>{j(!0),v(a||"")},className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Change"})]})]})})})]}),e.jsxs("div",{children:[e.jsx(m,{children:"AI Model"}),e.jsx(x,{variant:"default",children:e.jsxs(u,{className:"p-3 space-y-2",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Primary model for generation. Falls back to others if unavailable."}),e.jsx("div",{className:"space-y-1",children:le.map(s=>e.jsxs("button",{onClick:()=>q(s),className:`
                    w-full flex items-center justify-between px-3 py-2 rounded-lg text-left transition-colors
                    ${y===s?"bg-primary/10 border border-primary/30":"hover:bg-card-hover border border-transparent"}
                  `,children:[e.jsx("span",{className:`text-sm ${y===s?"text-foreground font-medium":"text-muted-foreground"}`,children:te[s]||s.split("/")[1]}),y===s&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})]},s))})]})})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Voice Training"}),e.jsx(x,{variant:"default",children:e.jsx(u,{className:"p-0",children:e.jsxs("button",{onClick:g,className:"w-full flex items-center justify-between p-3 hover:bg-card-hover transition-colors rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-muted flex items-center justify-center",children:e.jsx(ie,{size:14,className:"text-muted-foreground"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Train Your Voice"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:J?`${c} exemplar${c!==1?"s":""} · Style DNA active`:c>0?`${c} example${c!==1?"s":""} · Retrain for Style DNA`:"No profile yet"})]})]}),e.jsx(p,{size:14,className:"text-muted-foreground"})]})})})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Appearance"}),e.jsx(x,{variant:"default",children:e.jsx(u,{className:"p-3",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground",children:"Page glow"}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:h?"Stays on while panel is open":"Fades after 10 seconds"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:s=>Y(s.target.checked),className:"sr-only"}),e.jsx("div",{className:`
                  w-9 h-5 rounded-full transition-colors duration-200
                  ${h?"bg-primary":"bg-muted"}
                `,children:e.jsx("div",{className:`
                    w-4 h-4 bg-white rounded-full shadow-xs transform transition-transform duration-200
                    ${h?"translate-x-[18px]":"translate-x-[2px]"}
                    relative top-[2px]
                  `})})]})]})})})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Data"}),e.jsx(x,{variant:"default",children:e.jsxs(u,{className:"p-1",children:[e.jsxs("button",{onClick:()=>D(!0),disabled:E,className:"w-full flex items-center justify-between px-3 py-2.5 hover:bg-card-hover transition-colors rounded-lg text-left disabled:opacity-50",children:[e.jsx("span",{className:"text-sm text-foreground",children:E?"Clearing...":"Clear cache"}),e.jsx(p,{size:14,className:"text-muted-foreground"})]}),e.jsx("div",{className:"mx-3 border-t border-border/40"}),e.jsxs("button",{onClick:()=>I(!0),disabled:K,className:"w-full flex items-center justify-between px-3 py-2.5 hover:bg-card-hover transition-colors rounded-lg text-left disabled:opacity-50",children:[e.jsx("span",{className:"text-sm text-foreground",children:K?"Deleting...":"Delete conversations"}),e.jsx(p,{size:14,className:"text-muted-foreground"})]}),e.jsx("div",{className:"mx-3 border-t border-border/40"}),e.jsxs("button",{onClick:()=>M(!0),className:"w-full flex items-center justify-between px-3 py-2.5 hover:bg-card-hover transition-colors rounded-lg text-left",children:[e.jsx("span",{className:"text-sm text-destructive",children:"Reset everything"}),e.jsx(p,{size:14,className:"text-destructive/60"})]})]})})]}),e.jsx("div",{className:"text-center pb-2",children:e.jsx("p",{className:"text-[10px] text-muted-foreground/60",children:"v0.3.0 · Studio Drewskii"})}),Q&&e.jsx(k,{title:"Clear Cache?",description:"This will delete all cached page analyses. Your conversations and settings will be preserved.",confirmLabel:"Clear Cache",onConfirm:async()=>{z(!0);try{await w.analysisCache.clear(),r({type:"success",message:"Cache cleared successfully"})}catch{r({type:"error",message:"Failed to clear cache"})}finally{z(!1)}},onClose:()=>D(!1)}),U&&e.jsx(k,{title:"Delete All Conversations?",description:"This will permanently delete all your conversation history. This action cannot be undone.",confirmLabel:"Delete All",onConfirm:async()=>{T(!0);try{await w.conversations.clear(),r({type:"success",message:"Conversations deleted"})}catch{r({type:"error",message:"Failed to delete conversations"})}finally{T(!1)}},onClose:()=>I(!1)}),W&&e.jsx(k,{title:"Reset Everything?",description:"This will delete your API key, voice profile, all conversations, and cached data. This action cannot be undone.",confirmLabel:"Reset Everything",onConfirm:async()=>{try{O(),await w.delete(),chrome.storage.local.clear(),r({type:"success",message:"All data has been reset"})}catch{r({type:"error",message:"Failed to reset data"})}},onClose:()=>M(!1)})]})}export{ye as default};
