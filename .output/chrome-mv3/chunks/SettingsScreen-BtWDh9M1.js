import{c as S,r as t,j as e,X as Y,u as g}from"./sidepanel-DOESzR4q.js";import{d as M}from"./db-B74-OlEL.js";import{C as k,a as C}from"./card-CmhX-YKG.js";import{B as D}from"./badge-lIBAfX3c.js";import{B as i}from"./button-CxHTzYgu.js";import{I as q}from"./Input-BaDuoGWj.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=S("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=S("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=S("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);function X(){const[l,a]=t.useState("dark"),[n,x]=t.useState(!1);return t.useEffect(()=>{const r=localStorage.getItem("theme"),c=window.matchMedia("(prefers-color-scheme: dark)").matches,y=r||(c?"dark":"light");a(y),N(y),x(!0);const m=window.matchMedia("(prefers-color-scheme: dark)"),o=u=>{if(!localStorage.getItem("theme")){const d=u.matches?"dark":"light";a(d),N(d)}};return m.addEventListener("change",o),()=>m.removeEventListener("change",o)},[]),{theme:l,setTheme:()=>{const r=l==="dark"?"light":"dark";a(r),N(r),localStorage.setItem("theme",r)},isInitialized:n}}function N(l){const a=document.documentElement;l==="dark"?(a.classList.add("dark"),a.classList.remove("light")):(a.classList.add("light"),a.classList.remove("dark"))}function E({title:l,description:a,confirmLabel:n,cancelLabel:x="Cancel",variant:p="danger",onConfirm:r,onClose:c}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx(k,{className:"w-full max-w-sm",children:e.jsxs(C,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-base font-semibold text-foreground",children:l}),e.jsx("button",{onClick:c,className:"text-muted-foreground hover:text-foreground","aria-label":"Close dialog",children:e.jsx(Y,{size:18})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{onClick:c,variant:"secondary",size:"md",className:"flex-1",children:x}),e.jsx(i,{onClick:()=>{r(),c()},variant:p==="danger"?"danger":"primary",size:"md",className:"flex-1",children:n})]})]})})})}function ne(){const{theme:l,setTheme:a}=X(),n=g(s=>s.apiKey),x=g(s=>s.setApiKey),p=g(s=>s.clearApiKey),r=g(s=>s.persistentGlow),c=g(s=>s.setPersistentGlow),[y,m]=t.useState(!1),[o,u]=t.useState(n||""),[d,T]=t.useState(!1),[j,h]=t.useState(""),[f,w]=t.useState(!1),[v,K]=t.useState(0),[Z,L]=t.useState(!1),[V,z]=t.useState(!1),[G,I]=t.useState(!1);t.useEffect(()=>{const s=()=>{chrome.storage.local.get("voiceProfile",P=>{var A;P.voiceProfile&&K(((A=P.voiceProfile.exampleMessages)==null?void 0:A.length)||0)})};s();const b=()=>s();return chrome.storage.onChanged.addListener(b),()=>chrome.storage.onChanged.removeListener(b)},[]);const B=n?`${n.slice(0,7)}${"â€¢".repeat(Math.min(n.length-7,20))}`:"",$=async()=>{if(!o.trim()){h("Please enter an API key");return}T(!0),h("");try{const s=await fetch("https://openrouter.ai/api/v1/auth/key",{method:"GET",headers:{Authorization:`Bearer ${o.trim()}`}});s.ok&&(await s.json()).data?(x(o.trim()),m(!1),w(!1)):h("Invalid API key")}catch{h("Failed to validate API key")}finally{T(!1)}},R=s=>{s.preventDefault(),$()},U=()=>{u(n||""),h(""),m(!1),w(!1)},O=()=>{L(!0),chrome.tabs.create({url:chrome.runtime.getURL("sidepanel.html?voiceTraining=true")}),window.close()};if(new URLSearchParams(window.location.search).get("voiceTraining")==="true"){const s=require("@/components/screens/VoiceTrainingScreen").default;return e.jsx(s,{})}return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold leading-tight text-foreground mb-3",children:"API Key"}),y?e.jsxs("form",{onSubmit:R,className:"space-y-3",children:[e.jsx(q,{type:f?"text":"password",value:o,onChange:s=>u(s.target.value),placeholder:"sk-or-...",variant:"bordered",size:"md",error:!!j,disabled:d}),j&&e.jsx("p",{className:"text-xs leading-normal text-destructive",children:j}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"button",onClick:U,disabled:d,variant:"secondary",size:"md",className:"flex-1",children:"Cancel"}),e.jsx(i,{type:"submit",disabled:!o.trim()||d,variant:"primary",size:"md",className:"flex-1",children:d?"Validating...":"Save"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{variant:"default",children:e.jsxs(C,{className:"px-4 py-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-[13px] leading-relaxed text-foreground font-mono",children:f?n:B}),e.jsx("button",{onClick:()=>w(!f),className:"text-muted-foreground hover:text-foreground ml-2 flex items-center",type:"button","aria-label":f?"Hide API key":"Show API key",children:f?e.jsx(F,{size:16}):e.jsx(H,{size:16})})]})}),e.jsx(D,{variant:"success",dot:!0,size:"md",children:"Connected"}),e.jsx(i,{onClick:()=>{m(!0),u(n||"")},variant:"secondary",size:"md",className:"w-full",children:"Update API Key"})]})]}),e.jsxs("div",{className:"border-t border-border pt-4",children:[e.jsx("h2",{className:"text-base font-semibold leading-tight text-foreground mb-3",children:"Voice Training"}),e.jsxs(i,{onClick:O,variant:"secondary",size:"md",className:"w-full",children:[e.jsx(Q,{size:16,className:"mr-2"}),"Train Your Voice â†’"]}),v>0?e.jsx("div",{className:"mt-2 text-center",children:e.jsxs(D,{variant:v>=10?"success":"warning",size:"sm",children:[v," examples Â· ",v>=10?"Great":"Add more"]})}):e.jsx("p",{className:"text-xs leading-normal text-muted-foreground mt-2 text-center",children:"No examples yet"})]}),e.jsxs("div",{className:"border-t border-border pt-4",children:[e.jsx("h2",{className:"text-base font-semibold leading-tight text-foreground mb-3",children:"Appearance"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{onClick:a,variant:"secondary",size:"md",className:"w-full",children:l==="dark"?"â˜€ï¸ Switch to Light Mode":"ðŸŒ™ Switch to Dark Mode"}),e.jsx(k,{variant:"default",children:e.jsxs(C,{className:"px-4 py-3",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsx("span",{className:"text-[13px] leading-relaxed text-foreground",children:"Keep page glow on"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:s=>c(s.target.checked),className:"sr-only"}),e.jsx("div",{className:`
                    w-10 h-6 rounded-full transition-colors duration-200
                    ${r?"bg-accent":"bg-muted"}
                  `,children:e.jsx("div",{className:`
                      w-5 h-5 bg-white rounded-full shadow-sm transform transition-transform duration-200
                      ${r?"translate-x-5":"translate-x-0.5"}
                      relative top-0.5
                    `})})]})]}),e.jsx("p",{className:"text-[11px] leading-normal text-muted-foreground mt-2",children:r?"Glow stays on while side panel is open":"Glow fades after 10 seconds"})]})})]})]}),e.jsxs("div",{className:"border-t border-border pt-4",children:[e.jsx("h2",{className:"text-base font-semibold leading-tight text-foreground mb-3",children:"Data"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{onClick:()=>z(!0),variant:"ghost",size:"md",className:"w-full justify-start",children:"Clear cache"}),e.jsx(i,{onClick:()=>I(!0),variant:"ghost",size:"md",className:"w-full justify-start",children:"Delete conversations"}),e.jsx(i,{onClick:()=>{confirm("Are you sure you want to reset everything? This will delete your API key and all data.")&&(p(),chrome.storage.local.clear())},variant:"danger",size:"md",className:"w-full justify-start",children:"Reset everything"})]})]}),e.jsx("div",{className:"border-t border-border pt-4 text-center",children:e.jsx("p",{className:"text-[10px] leading-normal text-muted-foreground",children:"v0.1.0 Â· Studio Drewskii"})}),V&&e.jsx(E,{title:"Clear Cache?",description:"This will delete all cached page analyses. Your conversations and settings will be preserved.",confirmLabel:"Clear Cache",onConfirm:async()=>{await M.analysisCache.clear()},onClose:()=>z(!1)}),G&&e.jsx(E,{title:"Delete All Conversations?",description:"This will permanently delete all your conversation history. This action cannot be undone.",confirmLabel:"Delete All",onConfirm:async()=>{await M.conversations.clear()},onClose:()=>I(!1)})]})}export{ne as default};
